{"version":3,"sources":["webpack:///./src/stores/products.js","webpack:///./src/services/util.js","webpack:///./src/stores/util.js","webpack:///./src/main.js","webpack:///./src/components/App.vue","webpack:///./src/components/App.vue?9eee","webpack:///App.vue","webpack:///./src/components/ProductListContainer.vue","webpack:///./src/components/ProductListContainer.vue?af96","webpack:///ProductListContainer.vue","webpack:///./src/stores/product-init.js","webpack:///./src/stores/constraints.js","webpack:///./src/stores/linked-products.js","webpack:///./src/stores/defaults.js","webpack:///./src/components/ProductList.vue","webpack:///ProductList.vue","webpack:///./src/components/OptionList.vue","webpack:///./src/components/OptionList.vue?bdf3","webpack:///OptionList.vue","webpack:///./src/components/options/ListOption.vue","webpack:///./src/components/options/ListOption.vue?dfc7","webpack:///ListOption.vue","webpack:///./src/components/options/ListOption.vue?b40c","webpack:///./src/components/options/CheckboxOption.vue","webpack:///./src/components/options/CheckboxOption.vue?f066","webpack:///CheckboxOption.vue","webpack:///./src/components/options/CheckboxOption.vue?6449","webpack:///./src/components/options/TextBoxOption.vue","webpack:///./src/components/options/TextBoxOption.vue?f185","webpack:///TextBoxOption.vue","webpack:///./src/components/options/TextBoxOption.vue?2cd9","webpack:///./src/components/OptionList.vue?142b","webpack:///./src/components/ProductList.vue?e374","webpack:///./src/components/ProductListContainer.vue?56db","webpack:///./src/components/App.vue?e2dd","webpack:///./src/stores/store.js","webpack:///./src/services/logger.js","webpack:///./src/services/CurrencyFilter.js","webpack:///./src/sample-config.js","webpack:///./src/services/ShopifyClient.js","webpack:///node-fetch (ignored)"],"names":["ACTIONS","GET_ALL_PRODUCTS","CONFIGURE_LINKED_PRODUCTS","CONFIGURE_DEFAULTS","CONFIGURE_CONSTRAINTS","SET_VALUE","EVALUATE_CONSTRAINTS","UPDATE_SELECTIONS","UPDATE_LINKED_PRODUCTS","APPLY_CONSTRAINTS","REMOVE_CONSTRAINTS","MUTATIONS","RECEIVE_ALL_PRODUCTS","SELECT_OPTION","DESELECT_OPTION","ENABLE_OPTION","DISABLE_OPTION","createProductStore","config","shopifyClient","state","tree","variations","options","activeConstraints","actions","commit","dispatch","retrieveProducts","products","configureLinkedProducts","configureDefaults","selectDefaults","configureConstraints","evaluateConstraints","length","forEach","c","enforce","opts","filter","o","enabled","selected","prods","map","product","unique","option","multiSelect","defaults","getEnabledDefaults","updateLinkedProducts","set","mutations","configureProducts","item","index","arr","indexOf","deepCopy","obj","cache","hit","find","original","copy","Array","isArray","push","key","list","f","findPeer","source","split","needle","rest","p","title","console","warn","join","Vue","productionTip","use","client","el","template","components","App","store","createStore","resolve","reject","localStorage","getItem","JSON","parse","getProducts","setItem","pConf","id","product_id","price","Number","variants","createOption","bind","createVariant","getSetter","v","value","vConf","parent","current","constraints","createConstraint","needsAttention","target","rule","when","targetOptions","findTargets","check","createCheckFn","isActive","nextAction","shouldBeActive","hasOwnProperty","is","in","includes","greaterThan","values","enable","disable","links","master","l","createLinks","variation","type","def","default","defs","debug","Vuex","Store","strict","plugins","createLogger","collapsed","mutation","stateBefore","stateAfter","transformer","mutationTransformer","mut","prevState","subscribe","nextState","time","Date","formattedTime","pad","getHours","getMinutes","getSeconds","getMilliseconds","formattedMutation","message","startMessage","groupCollapsed","group","call","e","log","groupEnd","repeat","str","times","num","maxLength","toString","digitsRE","CurrencyFilter","currency","decimals","parseFloat","isFinite","stringified","Math","abs","toFixed","_int","slice","i","head","_float","sign","replace","Boolean","hidden","min","max","increment","productMap","shopify","accessToken","domain","appId","collection","ShopifyClient","ShopifyBuy","buildClient","isLoaded","err","error","maybeReturn","unpackResponse","response","attrs","fetchCollection","then","catch","fetchQueryProducts","collection_id"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AACA;AACA;AACA;;AAEO,IAAMA,UAAU;AACrBC,oBAAkB,kBADG;AAErBC,6BAA2B,2BAFN;AAGrBC,sBAAoB,oBAHC;AAIrBC,yBAAuB,uBAJF;AAKrBC,aAAW,WALU;AAMrBC,wBAAsB,sBAND;AAOrBC,qBAAmB,mBAPE;AAQrBC,0BAAwB,wBARH;AASrBC,qBAAmB,mBATE;AAUrBC,sBAAoB;AAVC,CAAhB;;AAaA,IAAMC,YAAY;AACvBC,wBAAsB,sBADC;AAEvBC,iBAAe,eAFQ;AAGvBC,mBAAiB,iBAHM;AAIvBC,iBAAe,eAJQ;AAKvBC,kBAAgB;AALO,CAAlB;;AAQA,SAASC,kBAAT,CAA6BC,MAA7B,EAAqCC,aAArC,EAAoD;AAAA;;AACzD,MAAMC,QAAQ;AACZC,UAAM,EADM;AAEZC,gBAAY,EAFA;AAGZC,aAAS;AAHG,GAAd;;AAMA,MAAIC,0BAAJ;;AAEA,MAAMC,0BAAA,4EAAAA,WACGzB,QAAQC,gBADX,kBACkD;AAAA;;AAAA,QAAnByB,MAAmB,QAAnBA,MAAmB;AAAA,QAAXC,QAAW,QAAXA,QAAW;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,qBAC7B,+EAAAC,CAAiBT,aAAjB,CAD6B;;AAAA;AAC9CU,sBAD8C;;AAEpDH,qBAAOf,UAAUC,oBAAjB,EAAuC,EAACiB,kBAAD,EAAvC;;AAEAF,uBAAS3B,QAAQE,yBAAjB;AACAyB,uBAAS3B,QAAQG,kBAAjB;AACAwB,uBAAS3B,QAAQI,qBAAjB;AACAuB,uBAAS3B,QAAQM,oBAAjB;AACAqB,uBAAS3B,QAAQQ,sBAAjB;;AARoD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AASrD,GAVG,0FAYHR,QAAQE,yBAZL,mBAY0C;AAAA,QAARkB,KAAQ,SAARA,KAAQ;;AAC5CU,IAAA,yFAAAA,CAAwBV,KAAxB;AACD,GAdG,0FAgBHpB,QAAQG,kBAhBL,mBAgB2C;AAAA,QAAhBiB,KAAgB,SAAhBA,KAAgB;AAAA,QAATM,MAAS,SAATA,MAAS;;AAC7CK,IAAA,4EAAAA,CAAkBX,KAAlB;AACAY,IAAA,yEAAAA,CAAeN,MAAf;AACD,GAnBG,0FAqBH1B,QAAQI,qBArBL,mBAqBsC;AAAA,QAARgB,KAAQ,SAARA,KAAQ;;AACxCa,IAAA,kFAAAA,CAAqBb,KAArB;AACD,GAvBG,0FAyBHpB,QAAQM,oBAzBL,mBAyBwC;AAAA,QAAXqB,QAAW,SAAXA,QAAW;;AAC1CH,wBAAoB,iFAAAU,EAApB;AACA,QAAIV,kBAAkBW,MAAlB,GAA2B,CAA/B,EAAkC;AAChCR,eAAS3B,QAAQS,iBAAjB;AACAkB,eAAS3B,QAAQO,iBAAjB;AACA;AACAoB,eAAS3B,QAAQM,oBAAjB;AACD;AACF,GAjCG,0FAmCHN,QAAQS,iBAnCL,mBAmCmC;AAAA,QAATiB,MAAS,SAATA,MAAS;;AACrCF,sBAAkBY,OAAlB,CAA0B;AAAA,aAAKC,EAAEC,OAAF,CAAUZ,MAAV,CAAL;AAAA,KAA1B;AACD,GArCG,0FAuCH1B,QAAQO,iBAvCL,mBAuC0C;AAAA,QAAhBmB,MAAgB,SAAhBA,MAAgB;AAAA,QAARN,KAAQ,SAARA,KAAQ;;AAC5C;AACA,QAAMmB,OAAOnB,MAAMG,OAAN,CAAciB,MAAd,CAAqB;AAAA,aAAK,CAACC,EAAEC,OAAH,IAAcD,EAAEE,QAArB;AAAA,KAArB,CAAb;AACA,QAAMC,QAAQL,KAAKM,GAAL,CAAS;AAAA,aAAKJ,EAAEK,OAAP;AAAA,KAAT,EAAyBN,MAAzB,CAAgCO,MAAhC,CAAd;;AAEA;AACAR,SAAKH,OAAL,CAAa;AAAA,aAAUV,OAAOf,UAAUG,eAAjB,EAAkC,EAACkC,cAAD,EAAlC,CAAV;AAAA,KAAb;;AAEA;AACAJ,UAAMR,OAAN,CAAc,mBAAW;AACvB,UAAIU,QAAQ5B,MAAR,CAAe+B,WAAnB,EAAgC;AAC9B;AACD;AACD,UAAMN,WAAWG,QAAQvB,OAAR,CAAgBiB,MAAhB,CAAuB;AAAA,eAAKC,EAAEE,QAAP;AAAA,OAAvB,CAAjB;AACA,UAAIA,SAASR,MAAT,GAAkB,CAAtB,EAAyB;AACvB;AACD;AACD,UAAIe,WAAW,6EAAAC,CAAmBL,OAAnB,CAAf;AACAI,eAASd,OAAT,CAAiB;AAAA,eAAUV,OAAOf,UAAUE,aAAjB,EAAgC,EAACmC,cAAD,EAAhC,CAAV;AAAA,OAAjB;AACD,KAVD;AAWD,GA3DG,0FA6DHhD,QAAQQ,sBA7DL,mBA6DwC;AAAA,QAATkB,MAAS,SAATA,MAAS;;AAC1C0B,IAAA,sFAAAA,CAAqB1B,MAArB;AACD,GA/DG,0FAiEH1B,QAAQK,SAjEL,2BAiEwD;AAAA,QAAtCqB,MAAsC,SAAtCA,MAAsC;AAAA,QAA9BC,QAA8B,SAA9BA,QAA8B;AAAA,QAAlBmB,OAAkB,UAAlBA,OAAkB;AAAA,QAATE,MAAS,UAATA,MAAS;;AAC1DF,YAAQO,GAAR,CAAY3B,MAAZ,EAAoBsB,MAApB;AACArB,aAAS3B,QAAQM,oBAAjB;AACAqB,aAAS3B,QAAQQ,sBAAjB;AACD,GArEG,YAAN;;AAwEA,MAAM8C,8BAAA,4EAAAA,aACH3C,UAAUC,oBADP,YAC8BQ,KAD9B,UACiD;AAAA,QAAXS,QAAW,UAAXA,QAAW;;AAAA,6BACf,gFAAA0B,CAAkBrC,MAAlB,EAA0BW,QAA1B,CADe;AAAA,QAC5CN,OAD4C,sBAC5CA,OAD4C;AAAA,QACnCD,UADmC,sBACnCA,UADmC;AAAA,QACvBD,IADuB,sBACvBA,IADuB;;AAEnDD,UAAMC,IAAN,GAAaA,IAAb;AACAD,UAAME,UAAN,GAAmBA,UAAnB;AACAF,UAAMG,OAAN,GAAgBA,OAAhB;AACD,GANG,4FAOHZ,UAAUE,aAPP,YAOuBO,KAPvB,UAOwC;AAAA,QAAT4B,MAAS,UAATA,MAAS;;AAC1CA,WAAOL,QAAP,GAAkB,IAAlB;AACD,GATG,4FAUHhC,UAAUG,eAVP,YAUyBM,KAVzB,UAU0C;AAAA,QAAT4B,MAAS,UAATA,MAAS;;AAC5CA,WAAOL,QAAP,GAAkB,KAAlB;AACD,GAZG,4FAaHhC,UAAUI,aAbP,YAauBK,KAbvB,UAawC;AAAA,QAAT4B,MAAS,UAATA,MAAS;;AAC1CA,WAAON,OAAP,GAAiB,IAAjB;AACD,GAfG,4FAgBH/B,UAAUK,cAhBP,YAgBwBI,KAhBxB,UAgByC;AAAA,QAAT4B,MAAS,UAATA,MAAS;;AAC3CA,WAAON,OAAP,GAAiB,KAAjB;AACD,GAlBG,cAAN;;AAqBA,SAAO;AACLtB,gBADK;AAELK,oBAFK;AAGL6B;AAHK,GAAP;AAKD;;AAED,IAAMP,SAAS,SAATA,MAAS,CAACS,IAAD,EAAOC,KAAP,EAAcC,GAAd;AAAA,SAAsBA,IAAIC,OAAJ,CAAYH,IAAZ,MAAsBC,KAA5C;AAAA,CAAf,C;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACvIA;;;;;;;;;AASO,SAASG,QAAT,CAAmBC,GAAnB,EAAoC;AAAA,MAAZC,KAAY,uEAAJ,EAAI;;AACzC;AACA,MAAID,QAAQ,IAAR,IAAgB,QAAOA,GAAP,sGAAOA,GAAP,OAAe,QAAnC,EAA6C;AAC3C,WAAOA,GAAP;AACD;;AAED;AACA,MAAME,MAAMC,KAAKF,KAAL,EAAY;AAAA,WAAKzB,EAAE4B,QAAF,KAAeJ,GAApB;AAAA,GAAZ,CAAZ;AACA,MAAIE,GAAJ,EAAS;AACP,WAAOA,IAAIG,IAAX;AACD;;AAED,MAAMA,OAAOC,MAAMC,OAAN,CAAcP,GAAd,IAAqB,EAArB,GAA0B,EAAvC;AACA;AACA;AACAC,QAAMO,IAAN,CAAW;AACTJ,cAAUJ,GADD;AAETK;AAFS,GAAX;;AAKA,4EAAYL,GAAZ,EAAiBzB,OAAjB,CAAyB,eAAO;AAC9B8B,SAAKI,GAAL,IAAYV,SAASC,IAAIS,GAAJ,CAAT,EAAmBR,KAAnB,CAAZ;AACD,GAFD;;AAIA,SAAOI,IAAP;AACD;;AAED;;;;;;;;AAQA,SAASF,IAAT,CAAeO,IAAf,EAAqBC,CAArB,EAAwB;AACtB,SAAOD,KAAK/B,MAAL,CAAYgC,CAAZ,EAAe,CAAf,CAAP;AACD,C;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AC9CM,SAASC,QAAT,CAAmB5C,QAAnB,EAA6B6C,MAA7B,EAAqC;AAAA,sBAChBA,OAAOC,KAAP,CAAa,GAAb,CADgB;AAAA;AAAA,MACnCC,MADmC;AAAA,MACxBC,IADwB;;AAE1C,MAAI/B,UAAUjB,SAASmC,IAAT,CAAc;AAAA,WAAKc,EAAEC,KAAF,KAAYH,MAAjB;AAAA,GAAd,CAAd;;AAEA,MAAI,CAAC9B,OAAD,IAAa+B,KAAK1C,MAAL,IAAe,CAACW,QAAQxB,UAAzC,EAAsD;AACpD0D,YAAQC,IAAR,iCAA2CP,MAA3C;AACD,GAFD,MAEO,IAAIG,KAAK1C,MAAL,IAAeW,QAAQxB,UAA3B,EAAuC;AAC5CwB,cAAU2B,SAAS3B,QAAQxB,UAAjB,EAA6BuD,KAAKK,IAAL,CAAU,GAAV,CAA7B,CAAV;AACD;AACD,SAAOpC,OAAP;AACD,C;;;;;;;;;;;;;;ACVD;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,oDAAAqC,CAAIjE,MAAJ,CAAWkE,aAAX,GAA2B,KAA3B;;AAEA,oDAAAD,CAAIE,GAAJ,CAAQ,qDAAR;AACA,oDAAAF,CAAIE,GAAJ,CAAQ,gFAAR;;AAEA,IAAMC,SAAS,IAAI,8EAAJ,CAAkB,uDAAlB,CAAf;;AAEA;AACA,IAAI,oDAAJ,CAAQ;AACNC,MAAI,MADE;AAENC,YAAU,QAFJ;AAGNC,cAAY,EAACC,KAAA,oEAAD,EAHN;AAINC,SAAO,0EAAAC,CAAY,4CAAZ,EAAoBN,MAApB;AAJD,CAAR,E;;;;;;;;;AClBA;AAAA;AACA,wBAAuV;AACvV;AACA;AACA;AACA;AACA;AACiP;AACjP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;;;;;;ACtBA,yC;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AC4CA;;AAEA;;AAIA;AAFA;AADA,G;;;;;;;;AC/CA;AAAA;AACA,wBAAsV;AACtV;AACA;AACA;AACA;AACA;AACgP;AAChP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;;;;;;ACtBA,yC;;;;;;;;;;;;;;;;;;;;;;;;ACQA;AACA;AACA;;AAEA;;AAKA;AAHA;;2EAIA,CAGA;;;AACA;;;;;;;;6GAEA;;;;;;;;;AACA;AAZA,G;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACbA;AACA;;AAEO,SAAS1D,gBAAT,CAA2B0D,MAA3B,EAAmC;AACxC,SAAO,0EAAY,UAACO,OAAD,EAAUC,MAAV,EAAqB;AACtC,QAAIjE,WAAWkE,aAAaC,OAAb,CAAqB,UAArB,CAAf;AACA,QAAInE,QAAJ,EAAc;AACZ,aAAOgE,QAAQI,KAAKC,KAAL,CAAWrE,QAAX,CAAR,CAAP;AACD;AACDyD,WAAOa,WAAP,CAAmB,gBAAgB;AAAA,UAAdtE,QAAc,QAAdA,QAAc;;AACjCkE,mBAAaK,OAAb,CAAqB,UAArB,EAAiC,6EAAevE,QAAf,CAAjC;AACAgE,cAAQhE,QAAR;AACD,KAHD;AAID,GATM,CAAP;AAUD;;AAEM,SAAS0B,iBAAT,CAA4BrC,MAA5B,EAAoCW,QAApC,EAA8C;AACnD,MAAMN,UAAU,EAAhB;AACA,MAAMD,aAAa,EAAnB;AACA,MAAMD,OAAOH,OAAOW,QAAP,CAAgBgB,GAAhB,CAAoB,iBAAS;AACxC,QAAMiC,IAAI,wEAAAlB,CACR/B,SAASmC,IAAT,CAAc;AAAA,aAAKc,EAAEC,KAAF,KAAYsB,MAAMtB,KAAvB;AAAA,KAAd,CADQ,CAAV;;AAIAD,MAAEwB,EAAF,GAAOxB,EAAEyB,UAAT;;AAEAzB,MAAE5D,MAAF,GAAW,wEAAA0C,CAASyC,KAAT,CAAX;;AAEAvB,MAAE0B,KAAF,GAAUC,OAAO3B,EAAE4B,QAAF,CAAW,CAAX,EAAcF,KAArB,CAAV;;AAEA1B,MAAEvD,OAAF,GAAY,CAACuD,EAAE5D,MAAF,CAASK,OAAT,IAAoB,EAArB,EAAyBsB,GAAzB,CAA6B8D,aAAaC,IAAb,CAAkB,IAAlB,EAAwB9B,CAAxB,CAA7B,CAAZ;;AAEAA,MAAExD,UAAF,GAAe,CAACwD,EAAE5D,MAAF,CAASI,UAAT,IAAuB,EAAxB,EAA4BuB,GAA5B,CAAgCgE,cAAcD,IAAd,CAAmB,IAAnB,EAAyBrF,OAAzB,EAAkCD,UAAlC,EAA8CwD,CAA9C,CAAhC,CAAf;;AAEA,QAAIA,EAAEvD,OAAF,CAAUY,MAAd,EAAsB;AACpBZ,cAAQ8C,IAAR,gGAAgBS,EAAEvD,OAAlB;AACA;AACD;;AAED,QAAIuD,EAAExD,UAAF,CAAaa,MAAjB,EAAyB;AACvBb,iBAAW+C,IAAX,mGAAmBS,EAAExD,UAArB;AACA;AACD;;AAED;AACAA,eAAW+C,IAAX,CAAgBS,CAAhB;AACA;;AAEAA,MAAEzB,GAAF,GAAQyD,UAAUhC,CAAV,CAAR;;AAEA,WAAOA,CAAP;AACD,GAhCY,CAAb;;AAkCA,SAAO,EAACvD,gBAAD,EAAUD,sBAAV,EAAsBD,UAAtB,EAAP;AACD;;AAED,IAAMsF,eAAe,SAAfA,YAAe,CAAC7B,CAAD,EAAIiC,CAAJ;AAAA,SAAW;AAC9BjE,aAASgC,CADqB;AAE9BkC,WAAOD,CAFuB;AAG9BrE,aAAS,IAHqB;AAI9BC,cAAU;AAJoB,GAAX;AAAA,CAArB;;AAOA,IAAMkE,gBAAgB,SAAhBA,aAAgB,CAACtF,OAAD,EAAUD,UAAV,EAAsBwB,OAAtB,EAA+BmE,KAA/B,EAAyC;AAC7D,MAAMnC,IAAI,EAAV;;AAEAA,IAAEoC,MAAF,GAAWpE,OAAX;;AAEAgC,IAAEC,KAAF,GAAUkC,MAAMlC,KAAhB;;AAEAD,IAAE5D,MAAF,GAAW+F,KAAX;;AAEAnC,IAAEvD,OAAF,GAAY,CAACuD,EAAE5D,MAAF,CAASK,OAAT,IAAoB,EAArB,EAAyBsB,GAAzB,CAA6B8D,aAAaC,IAAb,CAAkB,IAAlB,EAAwB9B,CAAxB,CAA7B,CAAZ;;AAEAA,IAAExD,UAAF,GAAe,CAACwD,EAAE5D,MAAF,CAASI,UAAT,IAAuB,EAAxB,EAA4BuB,GAA5B,CAAgCgE,cAAcD,IAAd,CAAmB,IAAnB,EAAyBrF,OAAzB,EAAkCD,UAAlC,EAA8CwD,CAA9C,CAAhC,CAAf;;AAEA,MAAIA,EAAEvD,OAAF,CAAUY,MAAd,EAAsB;AACpBZ,YAAQ8C,IAAR,gGAAgBS,EAAEvD,OAAlB;AACA;AACD;;AAED,MAAIuD,EAAExD,UAAF,CAAaa,MAAjB,EAAyB;AACvBb,eAAW+C,IAAX,mGAAmBS,EAAExD,UAArB;AACA;AACD;;AAEDwD,IAAEzB,GAAF,GAAQyD,UAAUhC,CAAV,CAAR;;AAEA,SAAOA,CAAP;AACD,CA1BD;;AA4BA,SAASgC,SAAT,CAAoBhE,OAApB,EAA6B;AAC3B,MAAIA,QAAQ5B,MAAR,CAAe+B,WAAnB,EAAgC;AAC9B,WAAO,UAAUvB,MAAV,EAAkBsB,MAAlB,EAA0B;AAC/B;AACAtB,aAAOsB,OAAOL,QAAP,GAAkB,4DAAAhC,CAAUG,eAA5B,GAA8C,4DAAAH,CAAUE,aAA/D,EAA8E,EAACmC,cAAD,EAA9E;AACD,KAHD;AAID;;AAED,SAAO,UAAUtB,MAAV,EAAkBsB,MAAlB,EAA0B;AAC/B;AACA,QAAMmE,UAAU,KAAK5F,OAAL,CAAayC,IAAb,CAAkB;AAAA,aAAKvB,EAAEE,QAAP;AAAA,KAAlB,CAAhB;AACA,QAAIwE,OAAJ,EAAa;AACXzF,aAAO,4DAAAf,CAAUG,eAAjB,EAAkC,EAACkC,QAAQmE,OAAT,EAAlC;AACD;AACD;AACAzF,WAAO,4DAAAf,CAAUE,aAAjB,EAAgC,EAACmC,cAAD,EAAhC;AACD,GARD;AASD,C;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AC5GD;AACA;;AAEA,IAAIoE,cAAc,EAAlB;;AAEO,SAASnF,oBAAT,OAAmD;AAAA,MAAnBZ,IAAmB,QAAnBA,IAAmB;AAAA,MAAbC,UAAa,QAAbA,UAAa;;AACxDA,aAAWc,OAAX,CAAmB,aAAK;AACtB,QAAI2E,EAAE7F,MAAF,CAASkG,WAAb,EAA0B;AACxB,UAAM/E,IAAI0E,EAAE7F,MAAF,CAASkG,WAAT,CAAqBvE,GAArB,CAAyBwE,iBAAiBT,IAAjB,CAAsB,IAAtB,EAA4BG,CAA5B,EAA+B1F,IAA/B,CAAzB,CAAV;AACA+F,kBAAY/C,IAAZ,oGAAoBhC,CAApB;AACD;AACF,GALD;AAMD;;AAEM,SAASH,mBAAT,GAAgC;AACrC,SAAOkF,YAAY5E,MAAZ,CAAmB;AAAA,WAAKH,EAAEiF,cAAF,EAAL;AAAA,GAAnB,CAAP;AACD;;AAED,SAASD,gBAAT,CAA2BE,MAA3B,EAAmClG,IAAnC,EAAyCmG,IAAzC,EAA+C;AAC7C,MAAM9C,SAAS,+DAAAD,CAASpD,IAAT,EAAemG,KAAKC,IAAL,CAAU/C,MAAzB,CAAf;AACA,MAAMgD,gBAAgBC,YAAYJ,OAAOhG,OAAnB,EAA4BiG,IAA5B,CAAtB;AACA,MAAMI,QAAQC,cAAcL,KAAKC,IAAnB,CAAd;AACA,MAAIK,iBAAJ;AACA,MAAIC,mBAAJ;;AAEA,SAAO;AACLrD,kBADK;AAEL6C,kBAFK;AAGLG,gCAHK;AAILJ,kBAJK,4BAIa;AAChB,UAAMU,iBAAiB,CAAC,CAACtD,OAAOnD,OAAP,CAAeyC,IAAf,CAAoB;AAAA,eAAKvB,EAAEE,QAAF,IAAciF,MAAMnF,CAAN,CAAnB;AAAA,OAApB,CAAzB;AACA,UAAM6E,iBAAiBU,mBAAmBF,QAA1C;AACA,UAAIR,cAAJ,EAAoB;AAClBS,qBAAaC,iBAAiB,4DAAArH,CAAUK,cAA3B,GAA4C,4DAAAL,CAAUI,aAAnE;AACA+G,mBAAWE,cAAX;AACD;AACD,aAAOV,cAAP;AACD,KAZI;AAaLhF,WAbK,mBAaIZ,MAbJ,EAaY;AACfgG,oBAActF,OAAd,CAAsB;AAAA,eAAUV,OAAOqG,UAAP,EAAmB,EAAC/E,cAAD,EAAnB,CAAV;AAAA,OAAtB;AACA+E,mBAAa,IAAb;AACD;AAhBI,GAAP;AAkBD;;AAED,SAASF,aAAT,CAAwBL,IAAxB,EAA8B;AAC5B,MAAIA,KAAKS,cAAL,CAAoB,IAApB,CAAJ,EAA+B;AAC7B,WAAO,UAACjF,MAAD;AAAA,aAAYA,OAAOgE,KAAP,KAAiBQ,KAAKU,EAAlC;AAAA,KAAP;AACD;;AAED,MAAIV,KAAKS,cAAL,CAAoB,IAApB,CAAJ,EAA+B;AAC7B,WAAO,UAACjF,MAAD;AAAA,aAAYwE,KAAKW,EAAL,CAAQC,QAAR,CAAiBpF,OAAOgE,KAAxB,CAAZ;AAAA,KAAP;AACD;;AAED,MAAIQ,KAAKS,cAAL,CAAoB,aAApB,CAAJ,EAAwC;AACtC,WAAO,UAACjF,MAAD;AAAA,aAAYA,OAAOgE,KAAP,GAAeQ,KAAKa,WAAhC;AAAA,KAAP;AACD;;AAEDrD,UAAQC,IAAR,2CAAqD,6EAAeuC,IAAf,CAArD;AACD;;AAED,SAASG,WAAT,CAAsBpG,OAAtB,EAA+BiG,IAA/B,EAAqC;AACnC,MAAMc,SAASd,KAAKe,MAAL,IAAef,KAAKgB,OAAnC;AACA,MAAIhB,KAAKe,MAAT,EAAiB;AACf,WAAOhH,QAAQiB,MAAR,CAAe;AAAA,aAAK,CAAC8F,OAAOF,QAAP,CAAgB3F,EAAEuE,KAAlB,CAAN;AAAA,KAAf,CAAP;AACD,GAFD,MAEO;AACL,WAAOzF,QAAQiB,MAAR,CAAe;AAAA,aAAK8F,OAAOF,QAAP,CAAgB3F,EAAEuE,KAAlB,CAAL;AAAA,KAAf,CAAP;AACD;AACF,C;;;;;;;;;;;;;;;ACpED;AACA;;AAEA,IAAMyB,QAAQ,EAAd;;AAEO,SAAS3G,uBAAT,OAAsD;AAAA,MAAnBT,IAAmB,QAAnBA,IAAmB;AAAA,MAAbC,UAAa,QAAbA,UAAa;;AAC3DA,aAAWc,OAAX,CAAmB,aAAK;AACtB,QAAI2E,EAAE7F,MAAF,CAASwH,MAAb,EAAqB;AACnB,UAAMC,IAAIC,YAAY7B,CAAZ,EAAe1F,IAAf,CAAV;AACAoH,YAAMpE,IAAN,8FAAcsE,CAAd;AACD;AACF,GALD;AAMD;;AAED,SAASC,WAAT,CAAsBC,SAAtB,EAAiCxH,IAAjC,EAAuC;AACrC,MAAMqD,SAAS,+DAAAD,CAASpD,IAAT,EAAewH,UAAU3H,MAAV,CAAiBwH,MAAhC,CAAf;AACA,SAAOhE,OAAOnD,OAAP,CAAesB,GAAf,CAAmB,kBAAU;AAClC,QAAM0E,SAASsB,UAAUtH,OAAV,CAAkByC,IAAlB,CAAuB;AAAA,aAAKvB,EAAEuE,KAAF,KAAYtC,OAAOsC,KAAxB;AAAA,KAAvB,CAAf;AACA,WAAO;AACLtC,oBADK;AAEL6C;AAFK,KAAP;AAID,GANM,CAAP;AAOD;;AAEM,SAASnE,oBAAT,CAA+B1B,MAA/B,EAAuC;AAC5C+G,QAAMrG,OAAN,CAAc,iBAAsB;AAAA,QAApBsC,MAAoB,SAApBA,MAAoB;AAAA,QAAZ6C,MAAY,SAAZA,MAAY;;AAClC,QAAMvE,SAASuE,MAAf;AACA,QAAI7C,OAAOhC,OAAP,KAAmB6E,OAAO7E,OAA9B,EAAuC;AACrC,UAAMoG,OAAOpE,OAAOhC,OAAP,GAAiB,4DAAA/B,CAAUI,aAA3B,GAA2C,4DAAAJ,CAAUK,cAAlE;AACAU,aAAOoH,IAAP,EAAa,EAAC9F,cAAD,EAAb;AACD;AACD,QAAI0B,OAAO/B,QAAP,KAAoB4E,OAAO5E,QAA/B,EAAyC;AACvC,UAAMmG,QAAOpE,OAAO/B,QAAP,GAAkB,4DAAAhC,CAAUE,aAA5B,GAA4C,4DAAAF,CAAUG,eAAnE;AACAY,aAAOoH,KAAP,EAAa,EAAC9F,cAAD,EAAb;AACD;AACF,GAVD;AAWD,C;;;;;;;;;;;;;;ACrCD;;AAEA,IAAME,WAAW,EAAjB;;AAEO,SAASnB,iBAAT,OAA0C;AAAA,MAAbT,UAAa,QAAbA,UAAa;;AAC/CA,aACGc,OADH,CACW,aAAK;AACZ,QAAI2G,MAAMhC,EAAE7F,MAAF,CAAS8H,OAAnB;AACA,QAAI,CAAC7E,MAAMC,OAAN,CAAc2E,GAAd,CAAL,EAAyB;AACvBA,YAAM,CAACA,GAAD,CAAN;AACD;AACD7F,aAASmB,IAAT,iGAAiB0C,EAAExF,OAAF,CAAUiB,MAAV,CAAiB;AAAA,aAAKuG,IAAIX,QAAJ,CAAa3F,EAAEuE,KAAf,CAAL;AAAA,KAAjB,CAAjB;AACD,GAPH;AAQD;;AAEM,SAAShF,cAAT,CAAyBN,MAAzB,EAAiC;AACtCwB,WAASd,OAAT,CAAiB;AAAA,WAAUV,OAAO,4DAAAf,CAAUE,aAAjB,EAAgC,EAACmC,cAAD,EAAhC,CAAV;AAAA,GAAjB;AACD;;AAEM,SAASG,kBAAT,CAA6BL,OAA7B,EAAsC;AAC3C,MAAImG,OAAO/F,SAASV,MAAT,CAAgB;AAAA,WAAKC,EAAEC,OAAF,IAAaD,EAAEK,OAAF,KAAcA,OAAhC;AAAA,GAAhB,CAAX;AACA,MAAImG,KAAK9G,MAAL,KAAgB,CAApB,EAAuB;AACrB8G,WAAO,CAACnG,QAAQvB,OAAR,CAAgByC,IAAhB,CAAqB;AAAA,aAAKvB,EAAEC,OAAP;AAAA,KAArB,CAAD,CAAP;AACD;AACD,SAAOuG,IAAP;AACD;;AAED;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AC3BA;AAAA;AACA;AACA;AACA;AACiP;AACjP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACKA;;AAEA;QAGA;;;AAIA;AAHA;;;cAOA;AAHA;;wBAIA;;oCAGA;AAFA;AAIA;;;;oCAEA;oCACA;AACA;6CACA;sCACA;AACA;+CACA;yCACA;AAEA;AAVA;AAjBA;;AA6BA,2BACA;cACA;kBACA;AACA;sBACA;AACA;eACA;;;;;;;;;AC/DA;AAAA;AACA,yBAAuV;AACvV;AACA;AACA;AACA;AACA;AACiP;AACjP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;;;;;;ACtBA,yC;;;;;;;;;;;;;;;;;;ACQA;AACA;AACA;;AAEA;;AAGA;AACA;AAGA;AALA;;;aAOA;aAGA;AAJA;;;4CAMA;kDACA;cACA;;AACA;mBACA;AACA;;AACA;mBACA;AACA;;AACA;mBACA;AAEA;;AAEA;AAfA;AAZA,G;;;;;;;;ACbA;AAAA;AACA,yBAA4V;AAC5V;AACA;AACA;AACA;AACA;AACmP;AACnP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;;;;;;ACtBA,yC;;;;;;;;;;;;;;;;;;;;;;;;;;;ACeA;AACA;;AAEA;;aAGA;aAEA;AAHA;AAIA,sJACA,mEAGA;AATA,G;;;;;;;;;;;ACnBA,0BAA0B,aAAa,0BAA0B,wBAAwB,0CAA0C,sBAAsB,uCAAuC,eAAe,4BAA4B,8BAA8B,QAAQ,2BAA2B,KAAK,yBAAyB,eAAe,qCAAqC,IAAI,iDAAiD;AACnb;AACA,iBAAiB;AACjB,kE;;;;;;;;ACHA;AAAA;AACA,yBAA4V;AAC5V;AACA;AACA;AACA;AACA;AACmP;AACnP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;;;;;;ACtBA,yC;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACiBA;AACA;;AAEA;;aAGA;aAEA;AAHA;;8CAKA;;iBACA;;AACA;sCACA;;kBACA;;AAEA;AAPA;AAQA,sJACA,mEAEA;;AACA;;;2BACA;;iHACA;AAEA;;AArBA,G;;;;;;;ACrBA,0BAA0B,aAAa,0BAA0B,wBAAwB,eAAe,4BAA4B,6DAA6D,QAAQ,0BAA0B,KAAK,wBAAwB;AAChQ;AACA,iBAAiB;AACjB,kE;;;;;;;;ACHA;AAAA;AACA,yBAA4V;AAC5V;AACA;AACA;AACA;AACA;AACmP;AACnP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;;;;;;ACtBA,yC;;;;;;;;;;;;;;;;;ACUA;;aAGA;aAEA;AAHA;AADA,G;;;;;;;ACXA,0BAA0B,aAAa,0BAA0B,wBAAwB;AACzF,oCAAoC,aAAa,0BAA0B,wBAAwB,6BAA6B,OAAO,eAAe,IAAI;AAC1J,iBAAiB;AACjB,kE;;;;;;;ACHA,0BAA0B,aAAa,0BAA0B,wBAAwB,6BAA6B,uBAAuB,6CAA6C;AAC1L;AACA,iBAAiB;AACjB,kE;;;;;;;ACHA,0BAA0B,aAAa,0BAA0B,wBAAwB,oEAAoE,iBAAiB,mCAAmC,kBAAkB,iCAAiC,kBAAkB,gBAAgB,gBAAgB,6HAA6H,OAAO,yBAAyB,yDAAyD,oBAAoB,YAAY,4BAA4B,sHAAsH,0BAA0B,oBAAoB,OAAO,iCAAiC,mBAAmB;AACvyB;AACA,iBAAiB;AACjB,kE;;;;;;;ACHA,0BAA0B,aAAa,0BAA0B,wBAAwB,0BAA0B,aAAa,oCAAoC,QAAQ,qBAAqB;AACjM;AACA,iBAAiB;AACjB,kE;;;;;;;ACHA,0BAA0B,aAAa,0BAA0B,wBAAwB,qBAAqB,sBAAsB,4EAA4E,6BAA6B,YAAY;AACzP;AACA,iBAAiB;AACjB,kE;;;;;;;;;;;;;;ACHA;AACA;AACA;;AAEA;AACA,IAAMC,QAAQ,KAAd;;AAEO,SAAStD,WAAT,CAAsB1E,MAAtB,EAA8BC,aAA9B,EAA6C;AAClD,MAAMwE,QAAQ,6EAAA1E,CAAmBC,MAAnB,EAA2BC,aAA3B,CAAd;;AAEA,SAAO,IAAI,qDAAAgI,CAAKC,KAAT,2EACFzD,KADE;AAEL0D,YAAQH,KAFH;AAGLI,aAASJ,QAAQ,CAAC,8EAAAK,EAAD,CAAR,GAA2B;AAH/B,KAAP;AAKD,C;;;;;;;;ACfD;AAAA;;AAEA;;AAEO,SAASA,YAAT,GAKC;AAAA,iFAAJ,EAAI;AAAA,4BAJNC,SAIM;AAAA,MAJNA,SAIM,kCAJM,IAIN;AAAA,yBAHNhH,MAGM;AAAA,MAHNA,MAGM,+BAHG,UAACiH,QAAD,EAAWC,WAAX,EAAwBC,UAAxB;AAAA,WAAuC,IAAvC;AAAA,GAGH;AAAA,8BAFNC,WAEM;AAAA,MAFNA,WAEM,oCAFQ;AAAA,WAASxI,KAAT;AAAA,GAER;AAAA,mCADNyI,mBACM;AAAA,MADNA,mBACM,yCADgB;AAAA,WAAOC,GAAP;AAAA,GAChB;;AACN,SAAO,iBAAS;AACd,QAAIC,YAAY,+DAAAnG,CAAS+B,MAAMvE,KAAf,CAAhB;;AAEAuE,UAAMqE,SAAN,CAAgB,UAACP,QAAD,EAAWrI,KAAX,EAAqB;AACnC,UAAI,OAAO4D,OAAP,KAAmB,WAAvB,EAAoC;AAClC;AACD;AACD,UAAMiF,YAAY,+DAAArG,CAASxC,KAAT,CAAlB;;AAEA,UAAIoB,OAAOiH,QAAP,EAAiBM,SAAjB,EAA4BE,SAA5B,CAAJ,EAA4C;AAC1C,YAAMC,OAAO,IAAIC,IAAJ,EAAb;AACA,YAAMC,wBAAsBC,IAAIH,KAAKI,QAAL,EAAJ,EAAqB,CAArB,CAAtB,SAAiDD,IAAIH,KAAKK,UAAL,EAAJ,EAAuB,CAAvB,CAAjD,SAA8EF,IAAIH,KAAKM,UAAL,EAAJ,EAAuB,CAAvB,CAA9E,SAA2GH,IAAIH,KAAKO,eAAL,EAAJ,EAA4B,CAA5B,CAAjH;AACA,YAAMC,oBAAoBb,oBAAoBJ,QAApB,CAA1B;AACA,YAAMkB,wBAAsBlB,SAASX,IAA/B,GAAsCsB,aAA5C;AACA,YAAMQ,eAAepB,YACjBxE,QAAQ6F,cADS,GAEjB7F,QAAQ8F,KAFZ;;AAIA;AACA,YAAI;AACFF,uBAAaG,IAAb,CAAkB/F,OAAlB,EAA2B2F,OAA3B;AACD,SAFD,CAEE,OAAOK,CAAP,EAAU;AACVhG,kBAAQiG,GAAR,CAAYN,OAAZ;AACD;;AAED3F,gBAAQiG,GAAR,CAAY,eAAZ,EAA6B,mCAA7B,EAAkErB,YAAYG,SAAZ,CAAlE;AACA/E,gBAAQiG,GAAR,CAAY,aAAZ,EAA2B,mCAA3B,EAAgEP,iBAAhE;AACA1F,gBAAQiG,GAAR,CAAY,eAAZ,EAA6B,mCAA7B,EAAkErB,YAAYK,SAAZ,CAAlE;;AAEA,YAAI;AACFjF,kBAAQkG,QAAR;AACD,SAFD,CAEE,OAAOF,CAAP,EAAU;AACVhG,kBAAQiG,GAAR,CAAY,eAAZ;AACD;AACF;;AAEDlB,kBAAYE,SAAZ;AACD,KAlCD;AAmCD,GAtCD;AAuCD;;AAED,SAASkB,MAAT,CAAiBC,GAAjB,EAAsBC,KAAtB,EAA6B;AAC3B,SAAQ,IAAIlH,KAAJ,CAAUkH,QAAQ,CAAlB,CAAD,CAAuBnG,IAAvB,CAA4BkG,GAA5B,CAAP;AACD;;AAED,SAASf,GAAT,CAAciB,GAAd,EAAmBC,SAAnB,EAA8B;AAC5B,SAAOJ,OAAO,GAAP,EAAYI,YAAYD,IAAIE,QAAJ,GAAerJ,MAAvC,IAAiDmJ,GAAxD;AACD,C;;;;;;;;;;;;;;ACzDD,IAAMG,WAAW,gBAAjB;;AAEA,IAAaC,cAAb;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA,4BACkBvG,GADlB,EACuB;AACnBA,UAAI3C,MAAJ,CAAW,UAAX,EAAuBmJ,QAAvB;AACD;AAHH;;AAAA;AAAA;;AAMA,SAASA,QAAT,CAAmB3E,KAAnB,EAA0B2E,QAA1B,EAAoCC,QAApC,EAA8C;AAC5C5E,UAAQ6E,WAAW7E,KAAX,CAAR;AACA,MAAI,CAAC8E,SAAS9E,KAAT,CAAD,IAAqB,CAACA,KAAD,IAAUA,UAAU,CAA7C,EAAiD,OAAO,EAAP;AACjD2E,aAAWA,YAAY,IAAZ,GAAmBA,QAAnB,GAA8B,GAAzC;AACAC,aAAWA,YAAY,IAAZ,GAAmBA,QAAnB,GAA8B,CAAzC;AACA,MAAMG,cAAcC,KAAKC,GAAL,CAASjF,KAAT,EAAgBkF,OAAhB,CAAwBN,QAAxB,CAApB;AACA,MAAMO,OAAOP,WACTG,YAAYK,KAAZ,CAAkB,CAAlB,EAAqB,CAAC,CAAD,GAAKR,QAA1B,CADS,GAETG,WAFJ;AAGA,MAAMM,IAAIF,KAAKhK,MAAL,GAAc,CAAxB;AACA,MAAMmK,OAAOD,IAAI,CAAJ,GACRF,KAAKC,KAAL,CAAW,CAAX,EAAcC,CAAd,KAAoBF,KAAKhK,MAAL,GAAc,CAAd,GAAkB,GAAlB,GAAwB,EAA5C,CADQ,GAET,EAFJ;AAGA,MAAMoK,SAASX,WACXG,YAAYK,KAAZ,CAAkB,CAAC,CAAD,GAAKR,QAAvB,CADW,GAEX,EAFJ;AAGA,MAAMY,OAAOxF,QAAQ,CAAR,GAAY,GAAZ,GAAkB,EAA/B;AACA,SAAOwF,OAAOb,QAAP,GAAkBW,IAAlB,GACLH,KAAKC,KAAL,CAAWC,CAAX,EAAcI,OAAd,CAAsBhB,QAAtB,EAAgC,KAAhC,CADK,GAELc,MAFF;AAGD,C;;;;;;;;;;;;;;;;AC5BM,IAAM1K,WAAW,CACtB;AACEkD,SAAO,SADT;AAEExD,WAAS,CAAC,KAAD,EAAQ,MAAR,EAAgB,QAAhB,EAA0B,KAA1B,EAAiC,MAAjC,EAAyC,KAAzC,CAFX;AAGEyH,WAAS,KAHX,CAGiB;AAHjB,CADsB,EAMtB;AACEjE,SAAO,iBADT;AAEEzD,cAAY,CACV;AACEyD,WAAO,aADT;AAEE+D,UAAM4D,OAFR;AAGEnL,aAAS,CAAC,IAAD,EAAO,KAAP,CAHX;AAIEyH,aAAS;AAJX,GADU,EAOV;AACEjE,WAAO,sBADT;AAEExD,aAAS,CAAC,UAAD,EAAa,sBAAb,EAAqC,kBAArC,EAAyD,SAAzD,EAAoE,YAApE,CAFX;AAGEyH,aAAS,sBAHX;AAIE5B,iBAAa,CACX;AACEK,YAAM;AACJ/C,gBAAQ,6BADJ;AAEJwD,YAAI;AAFA,OADR;AAKEM,eAAS,CAAC,SAAD,EAAY,YAAZ;AALX,KADW,EAQX;AACEf,YAAM;AACJ/C,gBAAQ,6BADJ;AAEJwD,YAAI;AAFA,OADR;AAKEM,eAAS,CAAC,UAAD;AALX,KARW;AAJf,GAPU,EA4BV;AACEzD,WAAO,QADT;AAEE+D,UAAMrC,MAFR;AAGElF,aAAS,CAAC,IAAD,EAAO,GAAP,EAAY,CAAZ,EAAe,GAAf,EAAoB,CAApB,CAHX;AAIEyH,aAAS,GAJX;AAKE5B,iBAAa,CACX;AACEK,YAAM;AACJ/C,gBAAQ,6BADJ;AAEJwD,YAAI;AAFA,OADR;AAKEK,cAAQ,CAAC,GAAD,EAAM,CAAN;AALV,KADW,EAQX;AACEd,YAAM;AACJ/C,gBAAQ,6BADJ;AAEJwD,YAAI;AAFA,OADR;AAKEM,eAAS,CAAC,GAAD;AALX,KARW,EAeX;AACEf,YAAM;AACJ/C,gBAAQ,sCADJ;AAEJwD,YAAI;AAFA,OADR;AAKEK,cAAQ,CAAC,IAAD,EAAO,CAAP,EAAU,CAAV;AALV,KAfW,EAsBX;AACEd,YAAM;AACJ/C,gBAAQ,sCADJ;AAEJwD,YAAI;AAFA,OADR;AAKEK,cAAQ,CAAC,CAAD,EAAI,GAAJ,EAAS,CAAT;AALV,KAtBW;AALf,GA5BU,EAgEV;AACExD,WAAO,iBADT;AAEE+D,UAAM4D,OAFR;AAGEnL,aAAS,CAAC,IAAD,EAAO,KAAP,CAHX;AAIEyH,aAAS,IAJX;AAKE5B,iBAAa,CACX;AACEK,YAAM;AACJ/C,gBAAQ,6BADJ;AAEJwD,YAAI;AAFA,OADR;AAKEM,eAAS,CAAC,IAAD;AALX,KADW;AALf,GAhEU;AAFd,CANsB,EAyFtB;AACEzD,SAAO,qBADT;AAEE9B,eAAa,IAFf;AAGE1B,WAAS,CAAC,SAAD,EAAY,2BAAZ,EAAyC,0BAAzC,CAHX;AAIEyH,WAAS,CAAC,SAAD,EAAY,0BAAZ,CAJX;AAKE5B,eAAa,CACX;AACEK,UAAM;AACJ/C,cAAQ,sCADJ;AAEJyD,UAAI,CAAC,sBAAD,EAAyB,kBAAzB;AAFA,KADR;AAKEK,aAAS,CAAC,2BAAD;AALX,GADW;AALf,CAzFsB,EAwGtB;AACEzD,SAAO,eADT;AAEEzD,cAAY,CACV;AACEyD,WAAO,cADT;AAEE4H,YAAQ,IAFV;AAGEpL,aAAS,CAAC,IAAD,EAAO,GAAP,EAAY,CAAZ,EAAe,GAAf,EAAoB,CAApB,CAHX;AAIEmH,YAAQ;AAJV,GADU,EAOV;AACE3D,WAAO,KADT;AAEExD,aAAS,CAAC,KAAD,EAAQ,UAAR,EAAoB,SAApB,EAA+B,iBAA/B,EAAkD,OAAlD,EAA2D,WAA3D,CAFX;AAGEyH,aAAS;AAHX,GAPU,EAYV;AACEjE,WAAO,YADT;AAEExD,aAAS,CAAC,OAAD,EAAU,OAAV,EAAmB,WAAnB,CAFX;AAGEyH,aAAS;AAHX,GAZU,EAiBV;AACEjE,WAAO,YADT;AAEE+D,UAAM4D,OAFR;AAGEnL,aAAS,CAAC,IAAD,EAAO,KAAP,CAHX;AAIEyH,aAAS;AAJX,GAjBU,EAuBV;AACEjE,WAAO,kBADT;AAEExD,aAAS,CAAC,UAAD,EAAa,oBAAb,EAAmC,QAAnC,EAA6C,YAA7C,EAA2D,OAA3D,EAAoE,OAApE,EAA6E,WAA7E,CAFX;AAGEyH,aAAS;AAHX,GAvBU,EA4BV;AACEjE,WAAO,UADT;AAEExD,aAAS,CAAC,WAAD,EAAc,cAAd,CAFX;AAGEyH,aAAS;AAHX,GA5BU;AAFd,CAxGsB,EA6ItB;AACEjE,SAAO,eADT;AAEEzD,cAAY,CACV;AACEyD,WAAO,eADT;AAEExD,aAAS,CAAC,WAAD,EAAc,iBAAd,EAAiC,UAAjC,CAFX;AAGEyH,aAAS;AAHX,GADU,EAMV;AACEjE,WAAO,QADT;AAEExD,aAAS,CAAC,QAAD,EAAW,MAAX,EAAmB,UAAnB,CAFX;AAGEyH,aAAS,MAHX;AAIE5B,iBAAa,CACX;AACEK,YAAM;AACJ/C,gBAAQ,wBADJ;AAEJ2D,qBAAa;AAFT,OADR;AAKEG,eAAS,CAAC,MAAD;AALX,KADW;AAJf,GANU,EAoBV;AACEzD,WAAO,UADT;AAEExD,aAAS,CAAC,OAAD,EAAU,WAAV,EAAuB,UAAvB,CAFX;AAGEyH,aAAS;AAHX,GApBU;AAFd,CA7IsB,EA0KtB;AACEjE,SAAO,cADT;AAEEzD,cAAY,CACV;AACEyD,WAAO,UADT;AAEExD,aAAS,CAAC,OAAD,EAAU,WAAV,EAAuB,UAAvB,EAAmC,SAAnC,CAFX;AAGEyH,aAAS;AAHX,GADU,EAMV;AACEjE,WAAO,QADT;AAEExD,aAAS,CAAC,WAAD,EAAc,SAAd,CAFX;AAGEyH,aAAS;AAHX,GANU,EAWV;AACEjE,WAAO,cADT;AAEExD,aAAS,CAAC,gBAAD,EAAmB,gBAAnB,EAAqC,sBAArC,EAA6D,iBAA7D,EAAgF,kBAAhF,CAFX;AAGEyH,aAAS,iBAHX;AAIE5B,iBAAa,CACX;AACEK,YAAM;AACJ/C,gBAAQ,uBADJ;AAEJwD,YAAI;AAFA,OADR;AAKEK,cAAQ,CAAC,gBAAD,EAAmB,gBAAnB;AALV,KADW;AAJf,GAXU;AAFd,CA1KsB,EAuMtB;AACExD,SAAO,SADT;AAEExD,WAAS,CAAC,aAAD,EAAgB,SAAhB,EAA2B,MAA3B,CAFX;AAGEyH,WAAS,aAHX;AAIE5B,eAAa,CACX;AACEK,UAAM;AACJ/C,cAAQ,qBADJ;AAEJwD,UAAI;AAFA,KADR;AAKEM,aAAS;AALX,GADW;AAJf,CAvMsB,EAqNtB;AACEzD,SAAO,cADT;AAEEzD,cAAY,CACV;AACEyD,WAAO,QADT;AAEE+D,UAAM3E,KAFR;AAGE7C,gBAAY,CACV;AACEyD,aAAO,MADT;AAEE+D,YAAM4D,OAFR;AAGEnL,eAAS,CAAC,IAAD,EAAO,KAAP,CAHX;AAIEyH,eAAS;AAJX,KADU,EAOV;AACEjE,aAAO,QADT;AAEE+D,YAAM4D,OAFR;AAGEnL,eAAS,CAAC,IAAD,EAAO,KAAP,CAHX;AAIEyH,eAAS;AAJX,KAPU;AAHd,GADU,EAmBV;AACEjE,WAAO,OADT;AAEExD,aAAS,CAAC,MAAD,EAAS,YAAT,CAFX;AAGEyH,aAAS;AAHX,GAnBU;AAFd,CArNsB,EAiPtB;AACEjE,SAAO,QADT;AAEExD,WAAS,CAAC,eAAD,EAAkB,iCAAlB,EAAqD,MAArD,EAA6D,gBAA7D,CAFX;AAGEyH,WAAS,MAHX,CAGkB;AAHlB,CAjPsB,EAsPtB;AACEjE,SAAO,cADT;AAEE+D,QAAM4D,OAFR;AAGEnL,WAAS,CAAC,IAAD,EAAO,KAAP,CAHX;AAIEyH,WAAS;AAJX,CAtPsB,EA4PtB;AACEjE,SAAO,WADT;AAEE+D,QAAM4D,OAFR;AAGEnL,WAAS,CAAC,IAAD,EAAO,KAAP,CAHX;AAIEyH,WAAS;AAJX,CA5PsB,EAkQtB;AACEjE,SAAO,WADT;AAEExD,WAAS,CAAC,MAAD,EAAS,IAAT,EAAe,eAAf,CAFX;AAGEyH,WAAS;AAHX,CAlQsB,EAuQtB;AACEjE,SAAO,SADT;AAEEzD,cAAY,CACV;AACEyD,WAAO,QADT;AAEExD,aAAS,CAAC,UAAD,EAAa,MAAb,EAAqB,OAArB,CAFX;AAGEyH,aAAS;AAHX,GADU,EAMV;AACEjE,WAAO,OADT;AAEExD,aAAS,CAAC,MAAD,EAAS,QAAT,CAFX;AAGEyH,aAAS;AAHX,GANU,EAWV;AACEjE,WAAO,QADT;AAEE+D,UAAM,OAFR;AAGE8D,SAAK,GAHP;AAIEC,SAAK,IAJP;AAKEC,eAAW,IALb;AAME9D,aAAS;AANX,GAXU;AAFd,CAvQsB,EA8RtB;AACEjE,SAAO,oBADT;AAEE+D,QAAM4D,OAFR;AAGEnL,WAAS,CAAC,IAAD,EAAO,KAAP,CAHX;AAIEyH,WAAS;AAJX,CA9RsB,EAoStB;AACEjE,SAAO,eADT;AAEE+D,QAAM;AAFR,CApSsB,CAAjB;;AA0SA,IAAMiE,aAAa,uEAAnB;AACPlL,SAASO,OAAT,CAAiB;AAAA,SAAQ2K,WAAW1J,GAAX,CAAeG,KAAKuB,KAApB,EAA2BvB,IAA3B,CAAR;AAAA,CAAjB;;AAEO,IAAMwJ,UAAU;AACrB1H,UAAQ;AACN2H,iBAAa,kCADP;AAENC,YAAQ,6BAFF;AAGNC,WAAO;AAHD,GADa;AAMrBC,cAAY;AACV9G,QAAI;AADM;AANS,CAAhB,C;;;;;;;;;;;;;;;;;;;;;;AC7SP;AACA;;AAEO,SAAS+G,aAAT,CAAwBnM,MAAxB,EAAgC;AACrC,MAAIW,iBAAJ;AAAA,MAAcuL,mBAAd;AACA,MAAM9H,SAAS,mDAAAgI,CAAWC,WAAX,CAAuBrM,OAAOoE,MAA9B,CAAf;;AAEA,MAAMkI,WAAW,SAAXA,QAAW,GAAM;AACrB,WAAO3L,YAAYuL,UAAnB;AACD,GAFD;;AAIA;AACA,OAAKjH,WAAL,GAAmB,UAACN,OAAD,EAAa;AAC9B,QAAMC,SAAS,SAATA,MAAS,CAAC2H,GAAD,EAAS;AACtBzI,cAAQ0I,KAAR,CAAc,uBAAd,EAAuCD,GAAvC;AACD,KAFD;AAGA;AACA,QAAME,cAAc,SAAdA,WAAc,GAAM;AACxB,UAAIH,UAAJ,EAAgB;AACd3H,gBAAQ;AACNuH,gCADM;AAENvL;AAFM,SAAR;AAID;AACF,KAPD;;AASA;AACA;AACA,QAAM+L,iBAAiB,SAAjBA,cAAiB,CAACC,QAAD,EAAc;AACnC,aAAOA,SAAShL,GAAT,CAAa,UAACW,IAAD,EAAU;AAC5B,eAAO,+DAAAI,CAASJ,KAAKsK,KAAd,CAAP;AACD,OAFM,CAAP;AAGD,KAJD;;AAMAxI,WAAOyI,eAAP,CAAuB7M,OAAOkM,UAAP,CAAkB9G,EAAzC,EACG0H,IADH,CACQ,UAAUH,QAAV,EAAoB;AACxBT,mBAAaQ,eAAe,CAACC,QAAD,CAAf,EAA2B,CAA3B,CAAb;AACAF;AACD,KAJH,EAKGM,KALH,CAKSnI,MALT;;AAOAR,WAAO4I,kBAAP,CAA0B,EAACC,eAAejN,OAAOkM,UAAP,CAAkB9G,EAAlC,EAA1B,EACG0H,IADH,CACQ,UAAUH,QAAV,EAAoB;AACxBhM,iBAAW+L,eAAeC,QAAf,CAAX;AACAF;AACD,KAJH,EAKGM,KALH,CAKSnI,MALT;AAMD,GAnCD;AAoCD,C;;;;;;;;;;;AChDD,e","file":"static/js/app.633278d2c5c012e676dd.js","sourcesContent":["import { configureProducts, retrieveProducts } from './product-init';\nimport { configureConstraints, evaluateConstraints } from './constraints';\nimport { configureLinkedProducts, updateLinkedProducts } from './linked-products';\nimport { configureDefaults, getEnabledDefaults, selectDefaults } from './defaults';\n\nexport const ACTIONS = {\n  GET_ALL_PRODUCTS: 'GET_ALL_PRODUCTS',\n  CONFIGURE_LINKED_PRODUCTS: 'CONFIGURE_LINKED_PRODUCTS',\n  CONFIGURE_DEFAULTS: 'CONFIGURE_DEFAULTS',\n  CONFIGURE_CONSTRAINTS: 'CONFIGURE_CONSTRAINTS',\n  SET_VALUE: 'SET_VALUE',\n  EVALUATE_CONSTRAINTS: 'EVALUATE_CONSTRAINTS',\n  UPDATE_SELECTIONS: 'UPDATE_SELECTIONS',\n  UPDATE_LINKED_PRODUCTS: 'UPDATE_LINKED_PRODUCTS',\n  APPLY_CONSTRAINTS: 'APPLY_CONSTRAINTS',\n  REMOVE_CONSTRAINTS: 'REMOVE_CONSTRAINTS'\n};\n\nexport const MUTATIONS = {\n  RECEIVE_ALL_PRODUCTS: 'RECEIVE_ALL_PRODUCTS',\n  SELECT_OPTION: 'SELECT_OPTION',\n  DESELECT_OPTION: 'DESELECT_OPTION',\n  ENABLE_OPTION: 'ENABLE_OPTION',\n  DISABLE_OPTION: 'DISABLE_OPTION'\n};\n\nexport function createProductStore (config, shopifyClient) {\n  const state = {\n    tree: [],\n    variations: [],\n    options: []\n  };\n\n  let activeConstraints;\n\n  const actions = {\n    async [ACTIONS.GET_ALL_PRODUCTS] ({commit, dispatch}) {\n      const products = await retrieveProducts(shopifyClient);\n      commit(MUTATIONS.RECEIVE_ALL_PRODUCTS, {products});\n\n      dispatch(ACTIONS.CONFIGURE_LINKED_PRODUCTS);\n      dispatch(ACTIONS.CONFIGURE_DEFAULTS);\n      dispatch(ACTIONS.CONFIGURE_CONSTRAINTS);\n      dispatch(ACTIONS.EVALUATE_CONSTRAINTS);\n      dispatch(ACTIONS.UPDATE_LINKED_PRODUCTS);\n    },\n\n    [ACTIONS.CONFIGURE_LINKED_PRODUCTS] ({state}) {\n      configureLinkedProducts(state);\n    },\n\n    [ACTIONS.CONFIGURE_DEFAULTS] ({state, commit}) {\n      configureDefaults(state);\n      selectDefaults(commit);\n    },\n\n    [ACTIONS.CONFIGURE_CONSTRAINTS] ({state}) {\n      configureConstraints(state);\n    },\n\n    [ACTIONS.EVALUATE_CONSTRAINTS] ({dispatch}) {\n      activeConstraints = evaluateConstraints();\n      if (activeConstraints.length > 0) {\n        dispatch(ACTIONS.APPLY_CONSTRAINTS);\n        dispatch(ACTIONS.UPDATE_SELECTIONS);\n        // ...and reevaluate constraints.\n        dispatch(ACTIONS.EVALUATE_CONSTRAINTS);\n      }\n    },\n\n    [ACTIONS.APPLY_CONSTRAINTS] ({commit}) {\n      activeConstraints.forEach(c => c.enforce(commit));\n    },\n\n    [ACTIONS.UPDATE_SELECTIONS] ({commit, state}) {\n      // 1. Find options and related products\n      const opts = state.options.filter(o => !o.enabled && o.selected);\n      const prods = opts.map(o => o.product).filter(unique);\n\n      // 2. Deselect disabled options\n      opts.forEach(option => commit(MUTATIONS.DESELECT_OPTION, {option}));\n\n      // 3. Select default or first available\n      prods.forEach(product => {\n        if (product.config.multiSelect) {\n          return;\n        }\n        const selected = product.options.filter(o => o.selected);\n        if (selected.length > 0) {\n          return;\n        }\n        let defaults = getEnabledDefaults(product);\n        defaults.forEach(option => commit(MUTATIONS.SELECT_OPTION, {option}));\n      });\n    },\n\n    [ACTIONS.UPDATE_LINKED_PRODUCTS] ({commit}) {\n      updateLinkedProducts(commit);\n    },\n\n    [ACTIONS.SET_VALUE] ({commit, dispatch}, {product, option}) {\n      product.set(commit, option);\n      dispatch(ACTIONS.EVALUATE_CONSTRAINTS);\n      dispatch(ACTIONS.UPDATE_LINKED_PRODUCTS);\n    }\n  };\n\n  const mutations = {\n    [MUTATIONS.RECEIVE_ALL_PRODUCTS] (state, {products}) {\n      const {options, variations, tree} = configureProducts(config, products);\n      state.tree = tree;\n      state.variations = variations;\n      state.options = options;\n    },\n    [MUTATIONS.SELECT_OPTION] (state, {option}) {\n      option.selected = true;\n    },\n    [MUTATIONS.DESELECT_OPTION] (state, {option}) {\n      option.selected = false;\n    },\n    [MUTATIONS.ENABLE_OPTION] (state, {option}) {\n      option.enabled = true;\n    },\n    [MUTATIONS.DISABLE_OPTION] (state, {option}) {\n      option.enabled = false;\n    }\n  };\n\n  return {\n    state,\n    actions,\n    mutations\n  };\n}\n\nconst unique = (item, index, arr) => arr.indexOf(item) === index;\n\n\n\n// WEBPACK FOOTER //\n// ./src/stores/products.js","/**\r\n * Deep copy the given object considering circular structure.\r\n * This function caches all nested objects and its copies.\r\n * If it detects circular structure, use cached copy to avoid infinite loop.\r\n *\r\n * @param {*} obj\r\n * @param {Array<Object>} cache\r\n * @return {*}\r\n */\r\nexport function deepCopy (obj, cache = []) {\r\n  // just return if obj is immutable value\r\n  if (obj === null || typeof obj !== 'object') {\r\n    return obj;\r\n  }\r\n\r\n  // if obj is hit, it is in circular structure\r\n  const hit = find(cache, c => c.original === obj);\r\n  if (hit) {\r\n    return hit.copy;\r\n  }\r\n\r\n  const copy = Array.isArray(obj) ? [] : {};\r\n  // put the copy into cache at first\r\n  // because we want to refer it in recursive deepCopy\r\n  cache.push({\r\n    original: obj,\r\n    copy\r\n  });\r\n\r\n  Object.keys(obj).forEach(key => {\r\n    copy[key] = deepCopy(obj[key], cache);\r\n  });\r\n\r\n  return copy;\r\n}\r\n\r\n/**\r\n * Get the first item that pass the test\r\n * by second argument function\r\n *\r\n * @param {Array} list\r\n * @param {Function} f\r\n * @return {*}\r\n */\r\nfunction find (list, f) {\r\n  return list.filter(f)[0];\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/services/util.js","export function findPeer (products, source) {\n  const [needle, ...rest] = source.split('.');\n  let product = products.find(p => p.title === needle);\n\n  if (!product || (rest.length && !product.variations)) {\n    console.warn(`Could not locate peer for \"${source}\"; possible misconfiguration`);\n  } else if (rest.length && product.variations) {\n    product = findPeer(product.variations, rest.join('.'));\n  }\n  return product;\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/stores/util.js","// The Vue build version to load with the `import` command\r\n// (runtime-only or standalone) has been set in webpack.base.conf with an alias.\r\nimport Vue from 'vue';\r\nimport App from './components/App.vue';\r\nimport Vuex from 'vuex';\r\nimport { createStore } from './stores/store';\r\nimport { CurrencyFilter } from './services/CurrencyFilter';\r\nimport * as config from './sample-config';\r\nimport { ShopifyClient } from './services/ShopifyClient';\r\n\r\nVue.config.productionTip = false;\r\n\r\nVue.use(Vuex);\r\nVue.use(CurrencyFilter);\r\n\r\nconst client = new ShopifyClient(config.shopify);\r\n\r\n/* eslint-disable no-new */\r\nnew Vue({\r\n  el: '#app',\r\n  template: '<App/>',\r\n  components: {App},\r\n  store: createStore(config, client)\r\n});\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/main.js","function injectStyle (ssrContext) {\n  require(\"!!../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"minimize\\\":true,\\\"sourceMap\\\":true}!../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-549db798\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!sass-loader?{\\\"sourceMap\\\":true}!../../node_modules/vue-loader/lib/selector?type=styles&index=0!./App.vue\")\n}\nvar normalizeComponent = require(\"!../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nimport __vue_script__ from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./App.vue\"\n/* template */\nimport __vue_template__ from \"!!../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-549db798\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":\\\"src\\\",\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"}}!../../node_modules/vue-loader/lib/selector?type=template&index=0!./App.vue\"\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/App.vue\n// module id = 74\n// module chunks = 1","// removed by extract-text-webpack-plugin\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/extract-text-webpack-plugin/dist/loader.js?{\"omit\":1,\"remove\":true}!./node_modules/vue-style-loader!./node_modules/css-loader?{\"minimize\":true,\"sourceMap\":true}!./node_modules/vue-loader/lib/style-compiler?{\"vue\":true,\"id\":\"data-v-549db798\",\"scoped\":false,\"hasInlineConfig\":false}!./node_modules/sass-loader/lib/loader.js?{\"sourceMap\":true}!./node_modules/vue-loader/lib/selector.js?type=styles&index=0!./src/components/App.vue\n// module id = 75\n// module chunks = 1","<template>\n  <section class=\"section\">\n    <h1>Gun Builder Constraint Checker</h1>\n    <div id=\"app\" class=\"content\">\n      <h2>Select Options</h2>\n      <product-list-container></product-list-container>\n    </div>\n  </section>\n</template>\n\n<style lang=\"scss\">\n  @import '~bulma';\n\n  html {\n    font-size: 12px;\n  }\n\n  h1 {\n    @extend .title;\n    @extend .is-1;\n  }\n  h2 {\n    @extend .subtitle;\n    @extend .is-2;\n  }\n  h3 {\n    @extend .subtitle;\n    @extend .is-3;\n  }\n  h4 {\n    @extend .subtitle;\n    @extend .is-4;\n  }\n\n  body {\n    font-size: .8rem;\n  }\n\n  body li li {\n    margin-left: 10px;\n  }\n</style>\n\n<script>\n  import ProductListContainer from './ProductListContainer.vue';\n\n  export default {\n    components: {\n      ProductListContainer\n    }\n  };\n</script>\n\n\n\n// WEBPACK FOOTER //\n// App.vue?1077c6a6","function injectStyle (ssrContext) {\n  require(\"!!../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"minimize\\\":true,\\\"sourceMap\\\":true}!../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-4b8a9bed\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!sass-loader?{\\\"sourceMap\\\":true}!../../node_modules/vue-loader/lib/selector?type=styles&index=0!./ProductListContainer.vue\")\n}\nvar normalizeComponent = require(\"!../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nimport __vue_script__ from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./ProductListContainer.vue\"\n/* template */\nimport __vue_template__ from \"!!../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-4b8a9bed\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":\\\"src\\\",\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"}}!../../node_modules/vue-loader/lib/selector?type=template&index=0!./ProductListContainer.vue\"\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-4b8a9bed\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/ProductListContainer.vue\n// module id = 78\n// module chunks = 1","// removed by extract-text-webpack-plugin\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/extract-text-webpack-plugin/dist/loader.js?{\"omit\":1,\"remove\":true}!./node_modules/vue-style-loader!./node_modules/css-loader?{\"minimize\":true,\"sourceMap\":true}!./node_modules/vue-loader/lib/style-compiler?{\"vue\":true,\"id\":\"data-v-4b8a9bed\",\"scoped\":true,\"hasInlineConfig\":false}!./node_modules/sass-loader/lib/loader.js?{\"sourceMap\":true}!./node_modules/vue-loader/lib/selector.js?type=styles&index=0!./src/components/ProductListContainer.vue\n// module id = 79\n// module chunks = 1","<template>\n    <product-list :products=\"tree\" style=\"display: flex; flex-wrap: wrap;\"></product-list>\n</template>\n\n<style lang=\"scss\" scoped>\n</style>\n\n<script>\n  import { mapState } from 'vuex';\n  import { ACTIONS } from '../stores/products';\n  import ProductList from './ProductList.vue';\n\n  export default {\n    components: {\n      ProductList\n    },\n\n    computed: mapState([\n      'tree'\n    ]),\n\n    async created () {\n      await this.$store.dispatch(ACTIONS.GET_ALL_PRODUCTS);\n      // this.$store.dispatch('addDefaultItemsToCart');\n    }\n  };\n</script>\n\n\n\n// WEBPACK FOOTER //\n// ProductListContainer.vue?c9b13848","import { deepCopy } from '../services/util';\nimport { MUTATIONS } from './products';\n\nexport function retrieveProducts (client) {\n  return new Promise((resolve, reject) => {\n    let products = localStorage.getItem('products');\n    if (products) {\n      return resolve(JSON.parse(products));\n    }\n    client.getProducts(({products}) => {\n      localStorage.setItem('products', JSON.stringify(products));\n      resolve(products);\n    });\n  });\n}\n\nexport function configureProducts (config, products) {\n  const options = [];\n  const variations = [];\n  const tree = config.products.map(pConf => {\n    const p = deepCopy(\n      products.find(p => p.title === pConf.title)\n    );\n\n    p.id = p.product_id;\n\n    p.config = deepCopy(pConf);\n\n    p.price = Number(p.variants[0].price);\n\n    p.options = (p.config.options || []).map(createOption.bind(null, p));\n\n    p.variations = (p.config.variations || []).map(createVariant.bind(null, options, variations, p));\n\n    if (p.options.length) {\n      options.push(...p.options);\n      // options.push(...p.options.map(o => ({product: p, option: o})));\n    }\n\n    if (p.variations.length) {\n      variations.push(...p.variations);\n      // variations.push(...p.variations.map(v => ({product: p, variation: v})));\n    }\n\n    // All products are variations. Or is it vice versa? Or both?\n    variations.push(p);\n    // variations.push({product: null, variation: p});\n\n    p.set = getSetter(p);\n\n    return p;\n  });\n\n  return {options, variations, tree};\n}\n\nconst createOption = (p, v) => ({\n  product: p,\n  value: v,\n  enabled: true,\n  selected: false\n});\n\nconst createVariant = (options, variations, product, vConf) => {\n  const p = {};\n\n  p.parent = product;\n\n  p.title = vConf.title;\n\n  p.config = vConf;\n\n  p.options = (p.config.options || []).map(createOption.bind(null, p));\n\n  p.variations = (p.config.variations || []).map(createVariant.bind(null, options, variations, p));\n\n  if (p.options.length) {\n    options.push(...p.options);\n    // options.push(...p.options.map(o => ({product: p, option: o})));\n  }\n\n  if (p.variations.length) {\n    variations.push(...p.variations);\n    // variations.push(...p.variations.map(v => ({product: p, variation: v})));\n  }\n\n  p.set = getSetter(p);\n\n  return p;\n};\n\nfunction getSetter (product) {\n  if (product.config.multiSelect) {\n    return function (commit, option) {\n      // Toggle selected if already selected\n      commit(option.selected ? MUTATIONS.DESELECT_OPTION : MUTATIONS.SELECT_OPTION, {option});\n    };\n  }\n\n  return function (commit, option) {\n    // First deselect current\n    const current = this.options.find(o => o.selected);\n    if (current) {\n      commit(MUTATIONS.DESELECT_OPTION, {option: current});\n    }\n    // Then select new\n    commit(MUTATIONS.SELECT_OPTION, {option});\n  };\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/stores/product-init.js","import { MUTATIONS } from './products';\nimport { findPeer } from './util';\n\nlet constraints = [];\n\nexport function configureConstraints ({tree, variations}) {\n  variations.forEach(v => {\n    if (v.config.constraints) {\n      const c = v.config.constraints.map(createConstraint.bind(null, v, tree));\n      constraints.push(...c);\n    }\n  });\n}\n\nexport function evaluateConstraints () {\n  return constraints.filter(c => c.needsAttention());\n}\n\nfunction createConstraint (target, tree, rule) {\n  const source = findPeer(tree, rule.when.source);\n  const targetOptions = findTargets(target.options, rule);\n  const check = createCheckFn(rule.when);\n  let isActive;\n  let nextAction;\n\n  return {\n    source,\n    target,\n    targetOptions,\n    needsAttention () {\n      const shouldBeActive = !!source.options.find(o => o.selected && check(o));\n      const needsAttention = shouldBeActive !== isActive;\n      if (needsAttention) {\n        nextAction = shouldBeActive ? MUTATIONS.DISABLE_OPTION : MUTATIONS.ENABLE_OPTION;\n        isActive = shouldBeActive;\n      }\n      return needsAttention;\n    },\n    enforce (commit) {\n      targetOptions.forEach(option => commit(nextAction, {option}));\n      nextAction = null;\n    }\n  };\n}\n\nfunction createCheckFn (rule) {\n  if (rule.hasOwnProperty('is')) {\n    return (option) => option.value === rule.is;\n  }\n\n  if (rule.hasOwnProperty('in')) {\n    return (option) => rule.in.includes(option.value);\n  }\n\n  if (rule.hasOwnProperty('greaterThan')) {\n    return (option) => option.value > rule.greaterThan;\n  }\n\n  console.warn(`could not create check function for \"${JSON.stringify(rule)}\"`);\n}\n\nfunction findTargets (options, rule) {\n  const values = rule.enable || rule.disable;\n  if (rule.enable) {\n    return options.filter(o => !values.includes(o.value));\n  } else {\n    return options.filter(o => values.includes(o.value));\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/stores/constraints.js","import { findPeer } from './util';\nimport { MUTATIONS } from './products';\n\nconst links = [];\n\nexport function configureLinkedProducts ({tree, variations}) {\n  variations.forEach(v => {\n    if (v.config.master) {\n      const l = createLinks(v, tree);\n      links.push(...l);\n    }\n  });\n}\n\nfunction createLinks (variation, tree) {\n  const source = findPeer(tree, variation.config.master);\n  return source.options.map(source => {\n    const target = variation.options.find(o => o.value === source.value);\n    return {\n      source,\n      target\n    };\n  });\n}\n\nexport function updateLinkedProducts (commit) {\n  links.forEach(({source, target}) => {\n    const option = target;\n    if (source.enabled !== target.enabled) {\n      const type = source.enabled ? MUTATIONS.ENABLE_OPTION : MUTATIONS.DISABLE_OPTION;\n      commit(type, {option});\n    }\n    if (source.selected !== target.selected) {\n      const type = source.selected ? MUTATIONS.SELECT_OPTION : MUTATIONS.DESELECT_OPTION;\n      commit(type, {option});\n    }\n  });\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/stores/linked-products.js","import { MUTATIONS } from './products';\n\nconst defaults = [];\n\nexport function configureDefaults ({variations}) {\n  variations\n    .forEach(v => {\n      let def = v.config.default;\n      if (!Array.isArray(def)) {\n        def = [def];\n      }\n      defaults.push(...v.options.filter(o => def.includes(o.value)));\n    });\n}\n\nexport function selectDefaults (commit) {\n  defaults.forEach(option => commit(MUTATIONS.SELECT_OPTION, {option}));\n}\n\nexport function getEnabledDefaults (product) {\n  let defs = defaults.filter(o => o.enabled && o.product === product);\n  if (defs.length === 0) {\n    defs = [product.options.find(o => o.enabled)];\n  }\n  return defs;\n}\n\n/*\nexport const selectDefaultOptions = (commit, {variations}) => {\n  variations.forEach(variation => {\n    addProductDefault(commit, variation);\n  });\n};\n\nfunction addProductDefault (commit, product) {\n  const enabledValues = getDefaultEnabledValues(product);\n  if (enabledValues.length === 0 && product.options.length > 0) {\n    console.warn(`Could not set default value on product ${product.title}. The requested value does not exist.`);\n  } else {\n    enabledValues.forEach((option) => {\n      commit(MUTATIONS.SELECT_OPTION, {option});\n    });\n  }\n}\n\nfunction getDefaultEnabledValues (product) {\n  // if product has no options just return\n  if (product.options.length === 0) {\n    return [];\n  }\n\n  const enabledOptions = product.options.filter(o => o.enabled);\n\n  // If 1 or 0, are enabled, no need to keep hunting.\n  if (enabledOptions.length === 0) {\n    console.warn(`${product.title} has no options enabled.`);\n    return enabledOptions;\n  } else if (enabledOptions.length === 1) {\n    // Product only has one option enabled.\n    return enabledOptions;\n  }\n\n  // Otherwise, hunt away!\n  const val = product.config.default;\n\n  if (val === undefined) {\n    // Product has no default; returning first available.\n    return [enabledOptions[0]];\n  }\n\n  if (Array.isArray(val)) {\n    const selections = enabledOptions.filter(o => val.includes(o.value));\n    if (selections.length > 0) {\n      // Found enabled default options for product; returning them.\n      return selections;\n    }\n  } else {\n    const selection = enabledOptions.find(o => o.value === val);\n    if (selection) {\n      // Found enabled default option for product returning it.\n      return [selection];\n    }\n  }\n\n  // All defaults are disabled for product returning first available.\n  return [enabledOptions[0]];\n}\n*/\n\n\n\n// WEBPACK FOOTER //\n// ./src/stores/defaults.js","var normalizeComponent = require(\"!../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nimport __vue_script__ from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./ProductList.vue\"\n/* template */\nimport __vue_template__ from \"!!../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-56176aa4\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":\\\"src\\\",\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"}}!../../node_modules/vue-loader/lib/selector?type=template&index=0!./ProductList.vue\"\n/* styles */\nvar __vue_styles__ = null\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/ProductList.vue\n// module id = 124\n// module chunks = 1","<template>\r\n  <div v-if=\"isVisible()\">\r\n    <div class=\"content\" v-for=\"p in products\" style=\"display: flex;\">\r\n      <div v-if=\"hasChildren(p)\" class=\"box\">\r\n        <component :is=\"level\">\r\n          {{ p.title }} - {{ p.price | currency }}\r\n        </component>\r\n        <product-list :products=\"p.variations\"></product-list>\r\n      </div>\r\n\r\n      <div v-if=\"hasOptions(p)\" class=\"panel\">\r\n        <div class=\"panel-heading\">\r\n            {{ p.title }} - {{ p.price | currency }}\r\n        </div>\r\n        <div class=\"panel-block\">\r\n          <option-list :options=\"p.options\" :product=\"p\"></option-list>\r\n        </div>\r\n      </div>\r\n\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\n  import OptionList from './OptionList.vue';\r\n\r\n  export default {\r\n    name: 'product-list',\r\n\r\n    components: {\r\n      OptionList\r\n    },\r\n\r\n    props: {\r\n      products: Array\r\n    },\r\n\r\n    data () {\r\n      return {\r\n        level: getLevel(this.products[0])\r\n      };\r\n    },\r\n\r\n    methods: {\r\n      isVisible () {\r\n        return this.products.length > 0;\r\n      },\r\n      hasOptions(product) {\r\n        return product.options.length > 0;\r\n      },\r\n      hasChildren(product) {\r\n        return product.variations.length > 0;\r\n      }\r\n    }\r\n  };\r\n\r\n  function getLevel (product) {\r\n    let level = 2;\r\n    while (product) {\r\n      level++;\r\n      product = product.parent;\r\n    }\r\n    return `h${level}`;\r\n  }\r\n</script>\r\n\n\n\n// WEBPACK FOOTER //\n// ProductList.vue?313758ca","function injectStyle (ssrContext) {\n  require(\"!!../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"minimize\\\":true,\\\"sourceMap\\\":true}!../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-892760e8\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!sass-loader?{\\\"sourceMap\\\":true}!../../node_modules/vue-loader/lib/selector?type=styles&index=0!./OptionList.vue\")\n}\nvar normalizeComponent = require(\"!../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nimport __vue_script__ from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./OptionList.vue\"\n/* template */\nimport __vue_template__ from \"!!../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-892760e8\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":\\\"src\\\",\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"}}!../../node_modules/vue-loader/lib/selector?type=template&index=0!./OptionList.vue\"\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/OptionList.vue\n// module id = 126\n// module chunks = 1","// removed by extract-text-webpack-plugin\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/extract-text-webpack-plugin/dist/loader.js?{\"omit\":1,\"remove\":true}!./node_modules/vue-style-loader!./node_modules/css-loader?{\"minimize\":true,\"sourceMap\":true}!./node_modules/vue-loader/lib/style-compiler?{\"vue\":true,\"id\":\"data-v-892760e8\",\"scoped\":false,\"hasInlineConfig\":false}!./node_modules/sass-loader/lib/loader.js?{\"sourceMap\":true}!./node_modules/vue-loader/lib/selector.js?type=styles&index=0!./src/components/OptionList.vue\n// module id = 127\n// module chunks = 1","<template>\r\n  <component :is=\"componentType\" :options=\"options\" :product=\"product\"></component>\r\n</template>\r\n\r\n<style lang=\"scss\">\r\n</style>\r\n\r\n<script>\r\n  import ListOption from './options/ListOption.vue';\r\n  import CheckboxOption from './options/CheckboxOption.vue';\r\n  import TextboxOption from './options/TextBoxOption.vue';\r\n\r\n  export default {\r\n    components: {\r\n      ListOption,\r\n      CheckboxOption,\r\n      TextboxOption\r\n    },\r\n\r\n    props: {\r\n      options: Array,\r\n      product: Object\r\n    },\r\n\r\n    computed: {\r\n      componentType () {\r\n        const valueType = this.product.config.type || String;\r\n        switch (valueType) {\r\n          case Boolean: {\r\n            return 'checkbox-option';\r\n          }\r\n          case 'textbox': {\r\n            return 'textbox-option';\r\n          }\r\n          default: {\r\n            return 'list-option';\r\n          }\r\n        }\r\n      }\r\n    }\r\n  };\r\n</script>\r\n\n\n\n// WEBPACK FOOTER //\n// OptionList.vue?5a3072fe","function injectStyle (ssrContext) {\n  require(\"!!../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"minimize\\\":true,\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-7a10961d\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!sass-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./ListOption.vue\")\n}\nvar normalizeComponent = require(\"!../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./ListOption.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-7a10961d\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":\\\"src\\\",\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"}}!../../../node_modules/vue-loader/lib/selector?type=template&index=0!./ListOption.vue\"\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-7a10961d\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/options/ListOption.vue\n// module id = 129\n// module chunks = 1","// removed by extract-text-webpack-plugin\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/extract-text-webpack-plugin/dist/loader.js?{\"omit\":1,\"remove\":true}!./node_modules/vue-style-loader!./node_modules/css-loader?{\"minimize\":true,\"sourceMap\":true}!./node_modules/vue-loader/lib/style-compiler?{\"vue\":true,\"id\":\"data-v-7a10961d\",\"scoped\":true,\"hasInlineConfig\":false}!./node_modules/sass-loader/lib/loader.js?{\"sourceMap\":true}!./node_modules/vue-loader/lib/selector.js?type=styles&index=0!./src/components/options/ListOption.vue\n// module id = 130\n// module chunks = 1","<template>\n  <div class=\"content\" v-if=\"options.length > 0\">\n    <a v-for=\"option in options\" :disabled=\"!option.enabled\" class=\"button\" :class=\"{'is-success': option.selected}\" @click=\"SET_VALUE({product, option})\">\n      {{option.value}}\n    </a>\n  </div>\n</template>\n\n<style lang=\"scss\" scoped>\n  a {\n    margin-right: 5px;\n  }\n</style>\n\n<script>\n  import { mapActions } from 'vuex';\n  import { ACTIONS } from '../../stores/products';\n\n  export default {\n    props: {\n      options: Array,\n      product: Object\n    },\n    methods: {\n      ...mapActions([\n        ACTIONS.SET_VALUE\n      ])\n    }\n  };\n</script>\n\n\n\n// WEBPACK FOOTER //\n// ListOption.vue?6eb326bc","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return (_vm.options.length > 0)?_c('div',{staticClass:\"content\"},_vm._l((_vm.options),function(option){return _c('a',{staticClass:\"button\",class:{'is-success': option.selected},attrs:{\"disabled\":!option.enabled},on:{\"click\":function($event){_vm.SET_VALUE({product: _vm.product, option: option})}}},[_vm._v(\"\\n    \"+_vm._s(option.value)+\"\\n  \")])})):_vm._e()}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-7a10961d\",\"hasScoped\":true,\"transformToRequire\":{\"video\":\"src\",\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/options/ListOption.vue\n// module id = 136\n// module chunks = 1","function injectStyle (ssrContext) {\n  require(\"!!../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"minimize\\\":true,\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-37b19e02\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!sass-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./CheckboxOption.vue\")\n}\nvar normalizeComponent = require(\"!../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./CheckboxOption.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-37b19e02\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":\\\"src\\\",\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"}}!../../../node_modules/vue-loader/lib/selector?type=template&index=0!./CheckboxOption.vue\"\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-37b19e02\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/options/CheckboxOption.vue\n// module id = 137\n// module chunks = 1","// removed by extract-text-webpack-plugin\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/extract-text-webpack-plugin/dist/loader.js?{\"omit\":1,\"remove\":true}!./node_modules/vue-style-loader!./node_modules/css-loader?{\"minimize\":true,\"sourceMap\":true}!./node_modules/vue-loader/lib/style-compiler?{\"vue\":true,\"id\":\"data-v-37b19e02\",\"scoped\":true,\"hasInlineConfig\":false}!./node_modules/sass-loader/lib/loader.js?{\"sourceMap\":true}!./node_modules/vue-loader/lib/selector.js?type=styles&index=0!./src/components/options/CheckboxOption.vue\n// module id = 138\n// module chunks = 1","<template>\n  <a :disabled=\"isDisabled\" class=\"button\" :class=\"{'is-success': selectedOption && selectedOption.value}\" @click=\"toggleCart\">\n    {{product.title}}\n  </a>\n</template>\n\n<style lang=\"scss\" scoped>\n  @import \"../variables\";\n  .selected {\n    background: $color-selected;\n  }\n  .disabled {\n    background: $color-disabled;\n  }\n</style>\n\n<script>\n  import { mapActions } from 'vuex';\n  import { ACTIONS } from '../../stores/products';\n\n  export default {\n    props: {\n      options: Array,\n      product: Object\n    },\n    computed: {\n      selectedOption () {\n        return this.options.find(o => o.selected);\n      },\n      isDisabled () {\n        return !!this.options.find(o => !o.enabled);\n      }\n    },\n    methods: {\n      ...mapActions([\n        ACTIONS.SET_VALUE\n      ]),\n      toggleCart () {\n        const option = this.options.find(o => o !== this.selectedOption);\n        this[ACTIONS.SET_VALUE]({product: this.product, option});\n      }\n    }\n  };\n</script>\n\n\n\n// WEBPACK FOOTER //\n// CheckboxOption.vue?79408569","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('a',{staticClass:\"button\",class:{'is-success': _vm.selectedOption && _vm.selectedOption.value},attrs:{\"disabled\":_vm.isDisabled},on:{\"click\":_vm.toggleCart}},[_vm._v(\"\\n  \"+_vm._s(_vm.product.title)+\"\\n\")])}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-37b19e02\",\"hasScoped\":true,\"transformToRequire\":{\"video\":\"src\",\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/options/CheckboxOption.vue\n// module id = 140\n// module chunks = 1","function injectStyle (ssrContext) {\n  require(\"!!../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"minimize\\\":true,\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-187114f9\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!sass-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./TextBoxOption.vue\")\n}\nvar normalizeComponent = require(\"!../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./TextBoxOption.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-187114f9\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":\\\"src\\\",\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"}}!../../../node_modules/vue-loader/lib/selector?type=template&index=0!./TextBoxOption.vue\"\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-187114f9\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/options/TextBoxOption.vue\n// module id = 141\n// module chunks = 1","// removed by extract-text-webpack-plugin\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/extract-text-webpack-plugin/dist/loader.js?{\"omit\":1,\"remove\":true}!./node_modules/vue-style-loader!./node_modules/css-loader?{\"minimize\":true,\"sourceMap\":true}!./node_modules/vue-loader/lib/style-compiler?{\"vue\":true,\"id\":\"data-v-187114f9\",\"scoped\":true,\"hasInlineConfig\":false}!./node_modules/sass-loader/lib/loader.js?{\"sourceMap\":true}!./node_modules/vue-loader/lib/selector.js?type=styles&index=0!./src/components/options/TextBoxOption.vue\n// module id = 142\n// module chunks = 1","<template>\r\n    <div>\r\n      <input type=\"text\">\r\n    </div>\r\n</template>\r\n\r\n<style lang=\"scss\" scoped>\r\n</style>\r\n\r\n<script>\r\n  export default {\r\n    props: {\r\n      options: Array,\r\n      product: Object\r\n    }\r\n  };\r\n</script>\r\n\n\n\n// WEBPACK FOOTER //\n// TextBoxOption.vue?5d8df124","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _vm._m(0)}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('input',{attrs:{\"type\":\"text\"}})])}]\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-187114f9\",\"hasScoped\":true,\"transformToRequire\":{\"video\":\"src\",\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/options/TextBoxOption.vue\n// module id = 144\n// module chunks = 1","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c(_vm.componentType,{tag:\"component\",attrs:{\"options\":_vm.options,\"product\":_vm.product}})}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-892760e8\",\"hasScoped\":false,\"transformToRequire\":{\"video\":\"src\",\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/OptionList.vue\n// module id = 145\n// module chunks = 1","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return (_vm.isVisible())?_c('div',_vm._l((_vm.products),function(p){return _c('div',{staticClass:\"content\",staticStyle:{\"display\":\"flex\"}},[(_vm.hasChildren(p))?_c('div',{staticClass:\"box\"},[_c(_vm.level,{tag:\"component\"},[_vm._v(\"\\n        \"+_vm._s(p.title)+\" - \"+_vm._s(_vm._f(\"currency\")(p.price))+\"\\n      \")]),_vm._v(\" \"),_c('product-list',{attrs:{\"products\":p.variations}})],1):_vm._e(),_vm._v(\" \"),(_vm.hasOptions(p))?_c('div',{staticClass:\"panel\"},[_c('div',{staticClass:\"panel-heading\"},[_vm._v(\"\\n          \"+_vm._s(p.title)+\" - \"+_vm._s(_vm._f(\"currency\")(p.price))+\"\\n      \")]),_vm._v(\" \"),_c('div',{staticClass:\"panel-block\"},[_c('option-list',{attrs:{\"options\":p.options,\"product\":p}})],1)]):_vm._e()])})):_vm._e()}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-56176aa4\",\"hasScoped\":false,\"transformToRequire\":{\"video\":\"src\",\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/ProductList.vue\n// module id = 146\n// module chunks = 1","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('product-list',{staticStyle:{\"display\":\"flex\",\"flex-wrap\":\"wrap\"},attrs:{\"products\":_vm.tree}})}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-4b8a9bed\",\"hasScoped\":true,\"transformToRequire\":{\"video\":\"src\",\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/ProductListContainer.vue\n// module id = 147\n// module chunks = 1","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('section',{staticClass:\"section\"},[_c('h1',[_vm._v(\"Gun Builder Constraint Checker\")]),_vm._v(\" \"),_c('div',{staticClass:\"content\",attrs:{\"id\":\"app\"}},[_c('h2',[_vm._v(\"Select Options\")]),_vm._v(\" \"),_c('product-list-container')],1)])}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-549db798\",\"hasScoped\":false,\"transformToRequire\":{\"video\":\"src\",\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/App.vue\n// module id = 148\n// module chunks = 1","import Vuex from 'vuex';\nimport { createLogger } from '../services/logger';\nimport { createProductStore } from './products';\n\n// const debug = process.env.NODE_ENV !== 'production';\nconst debug = false;\n\nexport function createStore (config, shopifyClient) {\n  const store = createProductStore(config, shopifyClient);\n\n  return new Vuex.Store({\n    ...store,\n    strict: debug,\n    plugins: debug ? [createLogger()] : []\n  });\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/stores/store.js","// Credits: borrowed code from fcomb/redux-logger\n\nimport { deepCopy } from './util';\n\nexport function createLogger ({\n  collapsed = true,\n  filter = (mutation, stateBefore, stateAfter) => true,\n  transformer = state => state,\n  mutationTransformer = mut => mut\n} = {}) {\n  return store => {\n    let prevState = deepCopy(store.state);\n\n    store.subscribe((mutation, state) => {\n      if (typeof console === 'undefined') {\n        return;\n      }\n      const nextState = deepCopy(state);\n\n      if (filter(mutation, prevState, nextState)) {\n        const time = new Date();\n        const formattedTime = ` @ ${pad(time.getHours(), 2)}:${pad(time.getMinutes(), 2)}:${pad(time.getSeconds(), 2)}.${pad(time.getMilliseconds(), 3)}`;\n        const formattedMutation = mutationTransformer(mutation);\n        const message = `mutation ${mutation.type}${formattedTime}`;\n        const startMessage = collapsed\n          ? console.groupCollapsed\n          : console.group;\n\n        // render\n        try {\n          startMessage.call(console, message);\n        } catch (e) {\n          console.log(message);\n        }\n\n        console.log('%c prev state', 'color: #9E9E9E; font-weight: bold', transformer(prevState));\n        console.log('%c mutation', 'color: #03A9F4; font-weight: bold', formattedMutation);\n        console.log('%c next state', 'color: #4CAF50; font-weight: bold', transformer(nextState));\n\n        try {\n          console.groupEnd();\n        } catch (e) {\n          console.log(' log end ');\n        }\n      }\n\n      prevState = nextState;\n    });\n  };\n}\n\nfunction repeat (str, times) {\n  return (new Array(times + 1)).join(str);\n}\n\nfunction pad (num, maxLength) {\n  return repeat('0', maxLength - num.toString().length) + num;\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/services/logger.js","const digitsRE = /(\\d{3})(?=\\d)/g;\r\n\r\nexport class CurrencyFilter {\r\n  static install (Vue) {\r\n    Vue.filter('currency', currency);\r\n  }\r\n}\r\n\r\nfunction currency (value, currency, decimals) {\r\n  value = parseFloat(value);\r\n  if (!isFinite(value) || (!value && value !== 0)) return '';\r\n  currency = currency != null ? currency : '$';\r\n  decimals = decimals != null ? decimals : 2;\r\n  const stringified = Math.abs(value).toFixed(decimals);\r\n  const _int = decimals\r\n    ? stringified.slice(0, -1 - decimals)\r\n    : stringified;\r\n  const i = _int.length % 3;\r\n  const head = i > 0\r\n    ? (_int.slice(0, i) + (_int.length > 3 ? ',' : ''))\r\n    : '';\r\n  const _float = decimals\r\n    ? stringified.slice(-1 - decimals)\r\n    : '';\r\n  const sign = value < 0 ? '-' : '';\r\n  return sign + currency + head +\r\n    _int.slice(i).replace(digitsRE, '$1,') +\r\n    _float;\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/services/CurrencyFilter.js","export const products = [\n  {\n    title: 'Caliber',\n    options: ['9mm', '9x23', '.38 SC', '.40', '10mm', '.45'],\n    default: '9mm' // uncompensated '.40'\n  },\n  {\n    title: 'Top End Options',\n    variations: [\n      {\n        title: 'Compensated',\n        type: Boolean,\n        options: [true, false],\n        default: true\n      },\n      {\n        title: 'Barrel Configuration',\n        options: ['Standard', '3/4\" Tungsten Sleeve', '3/4\" Bull Barrel', 'Bushing', 'Sightblock'],\n        default: '3/4\" Tungsten Sleeve',\n        constraints: [\n          {\n            when: {\n              source: 'Top End Options.Compensated',\n              is: true\n            },\n            disable: ['Bushing', 'Sightblock']\n          },\n          {\n            when: {\n              source: 'Top End Options.Compensated',\n              is: false\n            },\n            disable: ['Standard']\n          }\n        ]\n      },\n      {\n        title: 'Length',\n        type: Number,\n        options: [4.25, 4.5, 5, 5.4, 6],\n        default: 4.5,\n        constraints: [\n          {\n            when: {\n              source: 'Top End Options.Compensated',\n              is: true\n            },\n            enable: [4.5, 5]\n          },\n          {\n            when: {\n              source: 'Top End Options.Compensated',\n              is: false\n            },\n            disable: [4.5]\n          },\n          {\n            when: {\n              source: 'Top End Options.Barrel Configuration',\n              is: 'Bushing'\n            },\n            enable: [4.25, 5, 6]\n          },\n          {\n            when: {\n              source: 'Top End Options.Barrel Configuration',\n              is: 'Sightblock'\n            },\n            enable: [5, 5.4, 6]\n          }\n        ]\n      },\n      {\n        title: 'w/ Popple Holes',\n        type: Boolean,\n        options: [true, false],\n        default: true,\n        constraints: [\n          {\n            when: {\n              source: 'Top End Options.Compensated',\n              is: false\n            },\n            disable: [true]\n          }\n        ]\n      }\n    ]\n  },\n  {\n    title: 'Performance Options',\n    multiSelect: true,\n    options: ['Stroked', 'Front Internal Lightening', 'Rear Internal Lightening'],\n    default: ['Stroked', 'Rear Internal Lightening'],\n    constraints: [\n      {\n        when: {\n          source: 'Top End Options.Barrel Configuration',\n          in: ['3/4\" Tungsten Sleeve', '3/4\" Bull Barrel']\n        },\n        disable: ['Front Internal Lightening']\n      }\n    ]\n  },\n  {\n    title: 'Slide Options',\n    variations: [\n      {\n        title: 'Slide Length',\n        hidden: true,\n        options: [4.25, 4.5, 5, 5.4, 6],\n        master: 'Top End Options.Length'\n      },\n      {\n        title: 'Top',\n        options: ['Top', 'Flat Top', 'Tri-Top', 'Partial Tri-Top', 'Round', 'Signature'],\n        default: 'Signature'\n      },\n      {\n        title: 'Serrations',\n        options: ['4 LPI', '8 LPI', 'Signature'],\n        default: 'Signature'\n      },\n      {\n        title: 'Panel Cuts',\n        type: Boolean,\n        options: [true, false],\n        default: true\n      },\n      {\n        title: 'Front Serrations',\n        options: ['Standard', 'Reverse High Power', 'Butler', 'High Power', '4 LPI', '8 LPI', 'Signature'],\n        default: 'Signature'\n      },\n      {\n        title: 'Material',\n        options: ['Stainless', 'Carbon Steel'],\n        default: 'Carbon Steel'\n      }\n    ]\n  },\n  {\n    title: 'Frame Options',\n    variations: [\n      {\n        title: 'Configuration',\n        options: ['Long Wide', 'Heavy Long Wide', 'Tactical'],\n        default: 'Heavy Long Wide'\n      },\n      {\n        title: 'Length',\n        options: ['Butler', 'Full', 'Standard'],\n        default: 'Full',\n        constraints: [\n          {\n            when: {\n              source: 'Top End Options.Length',\n              greaterThan: 5\n            },\n            disable: ['Full']\n          }\n        ]\n      },\n      {\n        title: 'Material',\n        options: ['Steel', 'Stainless', 'Aluminum'],\n        default: 'Steel'\n      }\n    ]\n  },\n  {\n    title: 'Grip Options',\n    variations: [\n      {\n        title: 'Material',\n        options: ['Steel', 'Stainless', 'Aluminum', 'Polymer'],\n        default: 'Steel'\n      },\n      {\n        title: 'Length',\n        options: ['Full-Size', 'Compact'],\n        default: 'Full-Size'\n      },\n      {\n        title: 'Grip Texture',\n        options: ['WarDrum Medium', 'WarDrum Velvet', 'Signature Aggressive', 'Signature Blank', 'Signature Medium'],\n        default: 'Signature Blank',\n        constraints: [\n          {\n            when: {\n              source: 'Grip Options.Material',\n              is: 'Polymer'\n            },\n            enable: ['WarDrum Medium', 'WarDrum Velvet']\n          }\n        ]\n      }\n    ]\n  },\n  {\n    title: 'Magwell',\n    options: ['Competition', 'Compact', 'None'],\n    default: 'Competition',\n    constraints: [\n      {\n        when: {\n          source: 'Grip Options.Length',\n          is: 'Compact'\n        },\n        disable: 'Competition'\n      }\n    ]\n  },\n  {\n    title: 'Thumb Safety',\n    variations: [\n      {\n        title: 'Paddle',\n        type: Array,\n        variations: [\n          {\n            title: 'Ambi',\n            type: Boolean,\n            options: [true, false],\n            default: true\n          },\n          {\n            title: 'Shield',\n            type: Boolean,\n            options: [true, false],\n            default: true\n          }\n        ]\n      },\n      {\n        title: 'Width',\n        options: ['Wide', 'Extra Wide'],\n        default: 'Extra Wide'\n      }\n    ]\n  },\n  {\n    title: 'Sights',\n    options: ['Tritium Novak', 'Adjustable Bomar w/ Fiber Front', 'RTS2', 'RMR w/ Tritium'],\n    default: 'RTS2' // uncompensated: 'Adjustable Bomar w/ Fiber Front'\n  },\n  {\n    title: 'Slide Racker',\n    type: Boolean,\n    options: [true, false],\n    default: false\n  },\n  {\n    title: 'Gas Pedal',\n    type: Boolean,\n    options: [true, false],\n    default: false\n  },\n  {\n    title: 'Guide Rod',\n    options: ['FLGR', 'GI', 'Tungsten FLGR'],\n    default: 'FLGR'\n  },\n  {\n    title: 'Trigger',\n    variations: [\n      {\n        title: 'Length',\n        options: ['Standard', 'Long', 'Short'],\n        default: 'Standard'\n      },\n      {\n        title: 'Shape',\n        options: ['Flat', 'Curved'],\n        default: 'Flat'\n      },\n      {\n        title: 'Weight',\n        type: 'range',\n        min: 2.0,\n        max: 4.75,\n        increment: 0.25,\n        default: 2.75\n      }\n    ]\n  },\n  {\n    title: 'Grip Safety Pinned',\n    type: Boolean,\n    options: [true, false],\n    default: false\n  },\n  {\n    title: 'Custom Serial',\n    type: 'textbox'\n  }\n];\n\nexport const productMap = new Map();\nproducts.forEach(item => productMap.set(item.title, item));\n\nexport const shopify = {\n  client: {\n    accessToken: 'cccc9170b9d1911d095a199a51df92d4',\n    domain: 'rails-test-42.myshopify.com',\n    appId: '6'\n  },\n  collection: {\n    id: 442402061\n  }\n};\n\n\n\n// WEBPACK FOOTER //\n// ./src/sample-config.js","import { deepCopy } from './util';\r\nimport ShopifyBuy from 'shopify-buy';\r\n\r\nexport function ShopifyClient (config) {\r\n  let products, collection;\r\n  const client = ShopifyBuy.buildClient(config.client);\r\n\r\n  const isLoaded = () => {\r\n    return products && collection;\r\n  };\r\n\r\n  // TODO: Return a promise\r\n  this.getProducts = (resolve) => {\r\n    const reject = (err) => {\r\n      console.error('error loading product', err);\r\n    };\r\n    // return new Promise((resolve, reject) => {\r\n    const maybeReturn = () => {\r\n      if (isLoaded()) {\r\n        resolve({\r\n          collection,\r\n          products\r\n        });\r\n      }\r\n    };\r\n\r\n    // The Shopify Client wraps the raw response in a class, which we just toss. The raw props are on an \"attrs\" object\r\n    // so we copy those and treat them as the raw data.\r\n    const unpackResponse = (response) => {\r\n      return response.map((item) => {\r\n        return deepCopy(item.attrs);\r\n      });\r\n    };\r\n\r\n    client.fetchCollection(config.collection.id)\r\n      .then(function (response) {\r\n        collection = unpackResponse([response])[0];\r\n        maybeReturn();\r\n      })\r\n      .catch(reject);\r\n\r\n    client.fetchQueryProducts({collection_id: config.collection.id})\r\n      .then(function (response) {\r\n        products = unpackResponse(response);\r\n        maybeReturn();\r\n      })\r\n      .catch(reject);\r\n  };\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/services/ShopifyClient.js","/* (ignored) */\n\n\n//////////////////\n// WEBPACK FOOTER\n// node-fetch (ignored)\n// module id = 172\n// module chunks = 1"],"sourceRoot":""}